{"version":1,"kind":"Notebook","sha256":"b1aa52ecb8f056255dc879bc12b09e3462fd9ec7a97ca6f1e4d54c1d48460d5e","slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.edc-byoc-tutorial","location":"/external_notebooks/eurodatacube/notebooks/notebooks/contributions/edc_byoc_tutorial.ipynb","dependencies":[],"frontmatter":{"title":"How to bring your own data to EDC: Using Sentinel Hub Python package","content_includes_title":false,"kernelspec":{"name":"conda-env-edc-default-2022.07-00-py","display_name":"Python [conda env:edc-default-2022.07-00]","language":"python"},"github":"https://github.com/eurodatacube/example-viewer","subject":"Euro Data Cube Examples","numbering":{"title":{"offset":5}},"edit_url":"https://github.com/eurodatacube/example-viewer/blob/main/external_notebooks/eurodatacube/notebooks/notebooks/contributions/edc_byoc_tutorial.ipynb","exports":[{"format":"ipynb","filename":"edc_byoc_tutorial.ipynb","url":"/example-viewer/build/edc_byoc_tutorial-99223ffe627262e64807367369764efc.ipynb"}]},"widgets":{},"mdast":{"type":"root","children":[{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"thematicBreak","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"bk1FxgxReG"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Source: ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"RDG04YooUB"},{"type":"link","url":"https://sentinelhub-py.readthedocs.io/en/latest/examples/byoc_request.html","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Bring Your Own COG documentation","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"ikJw4p8a9i"}],"urlSource":"https://sentinelhub-py.readthedocs.io/en/latest/examples/byoc_request.html","key":"RDhTHdk7cL"}],"key":"Q8t0YwZHXG"},{"type":"heading","depth":2,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Getting started with Bring Your Own COG(BYOC)","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"egGneHrWzf"}],"identifier":"getting-started-with-bring-your-own-cog-byoc","label":"Getting started with Bring Your Own COG(BYOC)","html_id":"getting-started-with-bring-your-own-cog-byoc","implicit":true,"key":"rFssYQHq0F"},{"type":"paragraph","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Sentinel Hub allows you to access your own data stored in your S3 bucket with the powerful Sentinel Hub API. Since data remains on your bucket, you keep full control over it. This functionality requires no replication of data and allows you to exercise the full power of the Sentinel Hub service including Custom algorithms. ","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"HfM618w3P8"},{"type":"link","url":"https://www.sentinel-hub.com/bring-your-own-data/","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"More information here!","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"M9LxZudqg2"}],"urlSource":"https://www.sentinel-hub.com/bring-your-own-data/","key":"fk5FmnIciD"},{"type":"text","value":".","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"T2P0DJOl8W"}],"key":"SCJH7tgFme"},{"type":"paragraph","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"The ","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"iYAopjsdXa"},{"type":"link","url":"https://apps.sentinel-hub.com/dashboard/","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Sentinel Hub Dashboard","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"WTQlgpYiwb"}],"urlSource":"https://apps.sentinel-hub.com/dashboard/","key":"odQD9fjIW4"},{"type":"text","value":" has a very user-friendly “Bring your own COG” tab. If you are not going to be creating collections, adding/updating collection tiles, etc. daily, the Dashboard tool is your friend. For the rest, this tutorial is a simple walk-through on creating, updating, listing, and deleting your BYOC collections through Python using ","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"ecba0NfDlY"},{"type":"inlineCode","value":"sentinelhub-py","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"LU6QN9t7mP"},{"type":"text","value":".","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"SlCf65z1Hi"}],"key":"KGIflzxIyA"},{"type":"heading","depth":2,"position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"Outline","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"pMaz6nomJn"}],"identifier":"outline","label":"Outline","html_id":"outline","implicit":true,"key":"YUMoe8dwyK"},{"type":"paragraph","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"In this demonstration Jupyter Notebook, based on the ","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"GOZOxkUSdl"},{"type":"link","url":"https://sentinelhub-py.readthedocs.io/en/latest/examples/byoc_request.html#","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Sentinel Hub Python package BYOC examples","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"pH7FCuAZy7"}],"urlSource":"https://sentinelhub-py.readthedocs.io/en/latest/examples/byoc_request.html#","key":"uB0VPkCRlh"},{"type":"text","value":", we will learn how to:","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"fNXUDZZjmN"}],"key":"tgpmvqYHZf"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":12,"column":1},"end":{"line":26,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":12,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"link","url":"#Set-up-for-prerequisites","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Set up for prerequisites","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"bepSb3UeyF"}],"urlSource":"#Set-up-for-prerequisites","key":"YWzukFUIKX"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":13,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"crossReference","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"Imports","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"yJfKTXi2ry"}],"identifier":"imports","label":"Imports","kind":"heading","template":"{name}","resolved":true,"html_id":"imports","remote":true,"url":"/external-notebooks/eurodatacube/notebooks/notebooks/contributions/client-side-processing-using-mass-sh","dataUrl":"/external-notebooks.eurodatacube.notebooks.notebooks.contributions.client-side-processing-using-mass-sh.json","key":"Yprz6UOWcq"}],"key":"SqHgr38bED"},{"type":"listItem","spread":true,"position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"crossReference","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"Credentials","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"YPb9y7At3m"}],"identifier":"credentials","label":"Credentials","kind":"heading","template":"{name}","resolved":true,"html_id":"credentials","remote":true,"url":"/external-notebooks/eurodatacube/notebooks/notebooks/contributions/drought-monitoring","dataUrl":"/external-notebooks.eurodatacube.notebooks.notebooks.contributions.drought-monitoring.json","key":"I4lEXrMVJz"}],"key":"KPa64e4AZk"}],"key":"CdXqSrzzp4"}],"key":"KW0vZ1YsBD"},{"type":"listItem","spread":true,"position":{"start":{"line":15,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"crossReference","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"Manage BYOC collections","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"aAPwBylcpU"}],"identifier":"manage-byoc-collections","label":"Manage-BYOC-collections","kind":"heading","template":"{name}","resolved":true,"html_id":"manage-byoc-collections","key":"JQmGPqidMR"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":16,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"crossReference","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"text","value":"Create new collection","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"ukJYIlcHUu"}],"identifier":"create-new-collection","label":"Create-new-collection","kind":"heading","template":"{name}","resolved":true,"html_id":"create-new-collection","key":"G4HA5Y3ZoJ"}],"key":"B3EShTAGdf"},{"type":"listItem","spread":true,"position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"crossReference","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"text","value":"Get a list of your collections","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"GDLj4BsahP"}],"identifier":"get-a-list-of-your-collections","label":"Get-a-list-of-your-collections","kind":"heading","template":"{name}","resolved":true,"html_id":"get-a-list-of-your-collections","key":"NRbXrIwgyC"}],"key":"JXjvpvogvJ"},{"type":"listItem","spread":true,"position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"crossReference","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"text","value":"Update existing collection","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"ZrzUZEKs5q"}],"identifier":"update-existing-collection","label":"Update-existing-collection","kind":"heading","template":"{name}","resolved":true,"html_id":"update-existing-collection","key":"VuWtfVF7DU"}],"key":"KNwm8rSSZJ"},{"type":"listItem","spread":true,"position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"crossReference","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"text","value":"Delete collection","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"JWQ4BGEfjQ"}],"identifier":"delete-collection","label":"Delete-collection","kind":"heading","template":"{name}","resolved":true,"html_id":"delete-collection","key":"a1fDNqF7Ym"}],"key":"rFgz4qnIV2"}],"key":"sfjzD2sQbL"}],"key":"UvB4LUtvvC"},{"type":"listItem","spread":true,"position":{"start":{"line":20,"column":1},"end":{"line":25,"column":1}},"children":[{"type":"link","url":"#Manage-BYOC-tiles-(cogs-in-the-collection)","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"text","value":"Manage BYOC tiles (cogs in the collection)","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"r9cj6dv7js"}],"urlSource":"#Manage-BYOC-tiles-(cogs-in-the-collection)","key":"R2N8FrQ1dq"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":21,"column":1},"end":{"line":25,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"link","url":"#Creating-a-new-tile-(and-ingesting-it-to-collection)","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"text","value":"Creating a new tile (and ingesting it to collection)","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"hGPwYXJ4qc"}],"urlSource":"#Creating-a-new-tile-(and-ingesting-it-to-collection)","key":"VMWwGH762Z"}],"key":"o9AmtLvllU"},{"type":"listItem","spread":true,"position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"crossReference","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"text","value":"Add multiple tiles to a single collection","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"key":"j8dRqnXGWD"}],"identifier":"add-multiple-tiles-to-a-single-collection","label":"Add-multiple-tiles-to-a-single-collection","kind":"heading","template":"{name}","resolved":true,"html_id":"add-multiple-tiles-to-a-single-collection","key":"Brth0kNO5s"}],"key":"ovlgJriLCE"},{"type":"listItem","spread":true,"position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"crossReference","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"text","value":"Get tiles from your collection","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"ZIGGQRmJDs"}],"identifier":"get-tiles-from-your-collection","label":"Get-tiles-from-your-collection","kind":"heading","template":"{name}","resolved":true,"html_id":"get-tiles-from-your-collection","key":"lX12fqEwPI"}],"key":"w5nhWlZq2z"},{"type":"listItem","spread":true,"position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"crossReference","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"text","value":"Visualize the tiles in your collection","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"DwJGO3efhj"}],"identifier":"visualize-the-tiles-in-your-collection","label":"Visualize-the-tiles-in-your-collection","kind":"heading","template":"{name}","resolved":true,"html_id":"visualize-the-tiles-in-your-collection","key":"HrKtTwO8QY"}],"key":"fclxX4eTbz"},{"type":"listItem","spread":true,"position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"children":[{"type":"crossReference","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"children":[{"type":"text","value":"Update and delete a tile","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"MzfdMUF0bD"}],"identifier":"updating-and-deleting-a-tile","label":"Updating-and-deleting-a-tile","kind":"heading","template":"{name}","resolved":true,"html_id":"updating-and-deleting-a-tile","key":"RjRJ3397IE"}],"key":"bKN4yZ4qs2"}],"key":"laeJXbVWZJ"}],"key":"Wec3ZkomeQ"},{"type":"listItem","spread":true,"position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"children":[{"type":"crossReference","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"children":[{"type":"text","value":"Retrieve data from collection","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"ntLOvNuTWr"}],"identifier":"retrieve-data-from-collection","label":"Retrieve-data-from-collection","kind":"heading","template":"{name}","resolved":true,"html_id":"retrieve-data-from-collection","key":"uPrOkDJJ8E"}],"key":"y0o6zNhyxc"}],"key":"bPjOP0CzHM"}],"key":"mmdRtAex8Q"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"import sys\nsys.path.append(“/home/jovyan”)\nfrom credentials import *## Set up for prerequisites\nBefore accessing the data, we will start by importing the necessary Python libraries (already configured in your EDC workspace) and generate credentials automatically to access the services.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"MplODYHZjx"}],"key":"Tzj3LGzQDo"},{"type":"heading","depth":3,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Imports","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"vihJeHD924"}],"identifier":"imports","label":"Imports","html_id":"imports","implicit":true,"key":"Yt420P9PoV"}],"key":"DuOM6rI0eM"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"# EDC libraries\nfrom edc import setup_environment_variables\n\n# Utilities\nimport os\nimport boto3\nimport numpy as np\nimport datetime as dt\nimport pandas as pd\nimport geopandas as gpd\nimport matplotlib.pyplot as plt\n\n# Sentinel Hub\nfrom sentinelhub import (SHConfig, DataCollection, Geometry, BBox, CRS, \n                         SentinelHubRequest, filter_times, bbox_to_dimensions, MimeType, \n                         SentinelHubBYOC, ByocCollection, ByocTile, ByocCollectionAdditionalData,\n                         DownloadFailedException)","key":"D973a29Nqi"},{"type":"output","id":"Ak8IWcdkp4SZZRs_5NB_D","data":[],"key":"Y9JsK7tp1y"}],"key":"LjV2IuY1aw"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"# Configure plots for inline use in Jupyter Notebook\n%matplotlib inline","key":"fQtU001Tcn"},{"type":"output","id":"yvQwMrBeV0b4sx5MKo24Y","data":[],"key":"uBpSLiP7lT"}],"key":"lqvTYGLa8z"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Credentials","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"W6hPxaKglM"}],"identifier":"credentials","label":"Credentials","html_id":"credentials","implicit":true,"key":"pGbuzpcz4V"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Credentials for Sentinel Hub services are automatically injected as environement variables. It is therefore easy to populate Sentinel Hub’s credential manager with the values.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"PnJCNCvaHF"}],"key":"brGcYSnlsn"}],"key":"EZJX9wJEcX"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"# Pass Sentinel Hub credentials to SHConfig\nconfig = SHConfig()\nconfig.sh_client_id = os.environ[\"SH_CLIENT_ID\"]\nconfig.sh_client_secret = os.environ[\"SH_CLIENT_SECRET\"]","key":"oXCnp2lcW4"},{"type":"output","id":"U_66dC1mqdIT-X9xA4TBU","data":[],"key":"jr9BsCRDQR"}],"key":"Gb6D5aujgh"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"This example notebook will demonstrate how to ingest tiles from AWS S3 bucket taking ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"fBS7J5y5tS"},{"type":"link","url":"https://registry.opendata.aws/sentinel-s2-l2a-mosaic-120/","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Sentinel-2 L2A 120m Mosaic data","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"mxxN6kVfvl"}],"urlSource":"https://registry.opendata.aws/sentinel-s2-l2a-mosaic-120/","key":"rEZLD8m8bz"},{"type":"text","value":" as an example. You will need aws credentials to access data on AWS S3 bucket. Please create a text file named ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"LU4fOA9Gmt"},{"type":"inlineCode","value":"custom.env","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ebt9n6FmWy"},{"type":"text","value":" in your home directory with the following input:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"L3mCgCVnC8"}],"key":"ABOk8SZhzb"},{"type":"code","lang":"","value":"AWS_ACCESS_KEY_ID = \"<aws_access_key_id>\"\nAWS_SECRET_ACCESS_KEY = \"<aws_secret_access_key>\"","position":{"start":{"line":3,"column":1},"end":{"line":6,"column":1}},"key":"IjH9gxBgTY"}],"key":"oml4mHwFoG"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"config.aws_access_key_id = os.environ[\"AWS_ACCESS_KEY_ID\"]\nconfig.aws_secret_access_key = os.environ[\"AWS_SECRET_ACCESS_KEY\"]","key":"KbQ0OwY86C"},{"type":"output","id":"z7DM1o1HI5Y3_fIXIBrwg","data":[],"key":"vtnX434yVy"}],"key":"TEvuiv8KxC"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Manage BYOC collections","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"xxjvNTG3Bb"}],"identifier":"manage-byoc-collections","label":"Manage BYOC collections","html_id":"manage-byoc-collections","implicit":true,"key":"GFYLibTjY0"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"inlineCode","value":"SentinelHubBYOC","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"cuNmeXjU53"},{"type":"text","value":" class holds the methods for interacting with Sentinel-Hub services. Let’s initialize it with our ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"ziWCTTN4G8"},{"type":"inlineCode","value":"config","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"KkSl0BjTxa"},{"type":"text","value":":","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"duo5Ahoiby"}],"key":"HXFnwHjMuP"}],"key":"iie2JIDiRQ"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"# Initialize SentinelHubBYOC class\nbyoc = SentinelHubBYOC(config=config)","key":"mAca0EMWfs"},{"type":"output","id":"jaaGZ_4y7YkvU9Ze2ASTW","data":[],"key":"qrro00e6s1"}],"key":"IWFkzwHOmD"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Create new collection","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Chd1PB1lvk"}],"identifier":"create-new-collection","label":"Create new collection","html_id":"create-new-collection","implicit":true,"key":"lLSfnawLOE"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"The easiest way to create a collection is to use its dataclass:","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"GbmTjwTHR9"}],"key":"D8bWe5nu30"}],"key":"ietxPTw6l5"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"new_collection = ByocCollection(name='new collection', s3_bucket='byoc-tutorial-bucket')","key":"GyLFlQpDQi"},{"type":"output","id":"Hm1YuJvSAJNNwGes4evHt","data":[],"key":"WYaHF3klu6"}],"key":"IeIYV54U81"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"The ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"IAYUsZrrfx"},{"type":"inlineCode","value":"new collection","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"AyUEsnylx9"},{"type":"text","value":" is accessible on ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"SBz9awhqGN"},{"type":"inlineCode","value":"byoc-tutorial-bucket","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"vCPMf9pbvA"},{"type":"text","value":" s3 bucket (please see how to configure your bucket for Sentinel-Hub service ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"buK1He0iW9"},{"type":"link","url":"https://docs.sentinel-hub.com/api/latest/data/byoc/#aws-bucket-settings","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"here","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"OODZ0Xs9eN"}],"urlSource":"https://docs.sentinel-hub.com/api/latest/data/byoc/#aws-bucket-settings","key":"SR7gOH7tZC"},{"type":"text","value":").","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"u5DmRZSz4X"}],"key":"j0fhmbjlBc"}],"key":"iiwvBYBbd3"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"created_collection = byoc.create_collection(new_collection)","key":"m4gBykuOmM"},{"type":"output","id":"qB7WLc6rG9WjwUtXIwbG8","data":[],"key":"Y8aM9CWsFL"}],"key":"yEyw6PJlw8"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"created_collection_name = created_collection['name']\ncreated_collection_id = created_collection['id']\nprint('name:', created_collection_name)\nprint('id:', created_collection_id)","key":"sAMeQkp1iD"},{"type":"output","id":"3dNxDjGRmNSyx4nil8lKJ","data":[{"name":"stdout","output_type":"stream","text":"name: new collection\nid: 1ad2841e-3087-439f-9c82-0fcc8c8d68bc\n"}],"key":"q3um4BARn7"}],"key":"inf0E8zh6J"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Get a list of your collections","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"RDqR5JjgTo"}],"identifier":"get-a-list-of-your-collections","label":"Get a list of your collections","html_id":"get-a-list-of-your-collections","implicit":true,"key":"tbeHYwE3o6"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Now we have created a data collection named ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"PSEGmJtQlS"},{"type":"inlineCode","value":"new collection","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"b9uLHRjllf"},{"type":"text","value":", we can retrieve it with the following code.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"Rbw2N16FiD"}],"key":"CN4Tjlv0GC"}],"key":"ZlZtJIRPqD"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"my_collection = byoc.get_collection(created_collection_id)","key":"cfVOosF10g"},{"type":"output","id":"xPHaG5Eut4QUiUHaPM5Mq","data":[],"key":"aNindhPuSx"}],"key":"whRGvxS1Fo"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Let’s have a look at the collection we just created.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"x0yu9BQim3"}],"key":"iDPbhcLT5x"}],"key":"sz16AaikIP"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"print(f\"name: {my_collection['name']}\")\nprint(f\"collection id: {my_collection['id']}\")","key":"OoQ71YInzn"},{"type":"output","id":"9J1oGlhb57BZvtyUyeLfk","data":[{"name":"stdout","output_type":"stream","text":"name: new collection\ncollection id: 1ad2841e-3087-439f-9c82-0fcc8c8d68bc\n"}],"key":"WkZi35cIok"}],"key":"BJAJOMRV2l"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"In cases where you have a large amount of collections and you would only like to load collection info for a few collections, the following code would be a good option for you:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"axGT4n4ESJ"}],"key":"MsVz77CguP"}],"key":"Q5JJtAZoHc"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"collections_iterator = byoc.iter_collections()","key":"yayhGy9fxA"},{"type":"output","id":"C4a8hIB-ZM9_FfH-Bk56B","data":[],"key":"bwSMAMDvgJ"}],"key":"w8mbP78D6I"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"my_collection_using_next = next(collections_iterator)\nmy_collection_using_next\nprint('name:', my_collection_using_next['name'])\nprint('id:', my_collection_using_next['id'])","key":"bFPbBmSfSU"},{"type":"output","id":"5ANTl5uHt_MRspTYAe95X","data":[{"name":"stdout","output_type":"stream","text":"name: new collection\nid: 1ad2841e-3087-439f-9c82-0fcc8c8d68bc\n"}],"key":"pgIvVj3Amg"}],"key":"NwGOQnFN08"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Note:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"h7EmBiCy9b"}],"key":"XwizALdbbi"},{"type":"text","value":" ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"utjmQ5hGOB"},{"type":"inlineCode","value":"next()","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ZTW7mzLc8b"},{"type":"text","value":" will only show the first collection on its first execution, the second collection for its second execution, and so on. if you already have collections the code below won’t necessarily show the one we just created.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"erMH2Y8COQ"}],"key":"LIR8Z8ZE5g"}],"key":"yrEHy1mq19"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"If you prefer to work with dataclasses, you can also run the following code:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"HLJoRWwlXi"}],"key":"hxvo9MCs4P"},{"type":"code","lang":"python","value":"my_collection = ByocCollection.from_dict(next(collections_iterator))","position":{"start":{"line":3,"column":1},"end":{"line":5,"column":1}},"key":"QISZ7bUV0G"}],"key":"PFd6oICRl8"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"One can of course retrieve all of them in one go like so:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"UEpzny7G5o"}],"key":"Vsvlne3fYi"}],"key":"STCSV2Ev7V"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"my_collections = list(collections_iterator)\n\nfor collection in my_collections:\n    print((collection['name'], collection['id']))","key":"HJl5wsR7Vr"},{"type":"output","id":"10BtBSuFvxhiEkZmTK58t","data":[{"name":"stdout","output_type":"stream","text":"('new collection', '1ad2841e-3087-439f-9c82-0fcc8c8d68bc')\n"}],"key":"oFkf3qTySy"}],"key":"yvUZt96VxY"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"A useful way for managing your collections is ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"BQ2mILhnAw"},{"type":"inlineCode","value":"pandas.DataFrame","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"tKD8PqSQYk"},{"type":"text","value":" you can create like so:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"iCmjhsuCr8"}],"key":"puTNQOqq4j"}],"key":"ZR9rQniKNx"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"my_collections_df = pd.DataFrame(data=list(byoc.iter_collections()))\nmy_collections_df[['id','name','created']].head()","key":"NeFVKumICI"},{"type":"output","id":"82ppngKgtwM-kqoElURMN","data":[{"output_type":"execute_result","execution_count":15,"metadata":{},"data":{"text/html":{"content":"<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>id</th>\n      <th>name</th>\n      <th>created</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>1ad2841e-3087-439f-9c82-0fcc8c8d68bc</td>\n      <td>new collection</td>\n      <td>2022-07-21T16:09:29.220420Z</td>\n    </tr>\n  </tbody>\n</table>\n</div>","content_type":"text/html"},"text/plain":{"content":"                                     id            name  \\\n0  1ad2841e-3087-439f-9c82-0fcc8c8d68bc  new collection   \n\n                       created  \n0  2022-07-21T16:09:29.220420Z  ","content_type":"text/plain"}}}],"key":"hJZEqwAhTs"}],"key":"neEiNAQ8Ea"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Update existing collection","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"pyNkdsWjlE"}],"identifier":"update-existing-collection","label":"Update existing collection","html_id":"update-existing-collection","implicit":true,"key":"QrwCy3A9cU"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Anything you can do on Dashboard, Bring your own COG tab, you can do programmatically as well. Below we’re going to rename the ‘byoc-tutorial’ collection to ‘byoc-tutorial-renamed’:","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"MODkOUETTl"}],"key":"CsdTM49kCM"}],"key":"iznFHZd2Tb"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"my_collection['name'] = 'renamed new collection'","key":"WAYnUmjCJH"},{"type":"output","id":"dW7K9Vqf9ZjCrYjGG5Pjr","data":[],"key":"OLSFjtmdl9"}],"key":"j5aTxMfDBP"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"When using ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"WiC6kDLnuR"},{"type":"inlineCode","value":"next()","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"DV9hWQrhO6"},{"type":"text","value":", run the following code:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"TE0i232RMp"}],"key":"OAaBT5POvg"},{"type":"code","lang":"python","value":"my_collection['name'] = 'renamed new collection'","position":{"start":{"line":3,"column":1},"end":{"line":5,"column":1}},"key":"SarGWczdCF"},{"type":"paragraph","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"When using dataclass, run the following code:","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"uSG4Giw78y"}],"key":"OHJ6rDvlwn"},{"type":"code","lang":"python","value":"my_collection.name = 'renamed new collection'","position":{"start":{"line":8,"column":1},"end":{"line":10,"column":1}},"key":"ISDZVs0Kju"},{"type":"paragraph","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"When using ","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"Bzgrr528sr"},{"type":"inlineCode","value":"list","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"T9suT3KCq6"},{"type":"text","value":", run the following code:","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"vxrWqUxm1H"}],"key":"TAhpn0iYyo"},{"type":"code","lang":"python","value":"collection_to_be_updated = [x for x in my_collections if x['name']=='new collection'][0]\ncollection_to_be_updated['name'] = 'renamed new collection'","position":{"start":{"line":13,"column":1},"end":{"line":16,"column":1}},"key":"rbyNTKyJgZ"}],"key":"llh17Tb2Lq"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Note:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"G1mXdapWHE"}],"key":"Rt8MGHpYOp"},{"type":"text","value":" While you can change other fields as well, ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"NpqKILHm36"},{"type":"inlineCode","value":"s3_bucket","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"kc2qNYlkYu"},{"type":"text","value":" cannot be changed, and the ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"e9MeZrPJtX"},{"type":"inlineCode","value":"bitDepth","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"fM3eYboGzK"},{"type":"text","value":" of bands in the collection is something that is pertinent to the COGs themselves and populated during the ingestion.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Mh6XF1YYGE"}],"key":"dUdyygOO62"}],"key":"ngL3JDvIFp"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"To update the collection, call:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"fSNV9Fdxka"}],"key":"NmpliuBfuo"}],"key":"oqsVvNhCuA"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"byoc.update_collection(my_collection)","key":"sL5JGZGgIK"},{"type":"output","id":"4V3t1RSEUzBQXB9UQzldy","data":[{"output_type":"execute_result","execution_count":17,"metadata":{},"data":{"text/plain":{"content":"''","content_type":"text/plain"}}}],"key":"u3MC6vzIQH"}],"key":"eUNPxfASdL"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Now we can see that the ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"T4zCbaxUsG"},{"type":"inlineCode","value":"new collection","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Ot7YeYFGvQ"},{"type":"text","value":" collection has been renamed as ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"cFSra5SBN7"},{"type":"inlineCode","value":"renamed new collection","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"EVzWtfTC0k"},{"type":"text","value":".","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"QzjOnTbOxD"}],"key":"h8jTW8fFSV"}],"key":"Wqi5779nBC"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"get_renamed_collection = byoc.get_collection(created_collection_id)\nprint(\"name:\", get_renamed_collection['name'])\nprint(\"id:\", get_renamed_collection['id'])","key":"KvLnryR3aZ"},{"type":"output","id":"tqhcwOfXt96QgWKf_OEXF","data":[{"name":"stdout","output_type":"stream","text":"name: renamed new collection\nid: 1ad2841e-3087-439f-9c82-0fcc8c8d68bc\n"}],"key":"V3o05xzcC3"}],"key":"LmbIupHNfO"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Delete collection","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"zrmTe6GTZD"}],"identifier":"delete-collection","label":"Delete collection","html_id":"delete-collection","implicit":true,"key":"CYuQYeCf73"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"If you are the owner of the collection, you can also delete it. Let’s delete the ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"AHARubaYEY"},{"type":"inlineCode","value":"renamed new collection","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"erpCtr8Xcx"},{"type":"text","value":" collection we just created.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"siyVaZqNhN"}],"key":"OZlYTx4aMV"},{"type":"div","class":"alert alert-warning","children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Warning:","key":"rI82AXnfec"}],"key":"yJ5o8zOr25"}],"key":"aKDrNDycTd"},{"type":"paragraph","children":[{"type":"text","value":"Beware! Deleting the collection will also delete all its tiles!","key":"BZeJbVJ3TN"}],"key":"EybCcnfzNv"}],"key":"wcYF9E71vI"}],"key":"uwnSJ65Fl6"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"byoc.delete_collection(my_collection)","key":"QyFZSHsOmL"},{"type":"output","id":"Fs8C4azJifoEBcKkV2w4h","data":[{"output_type":"execute_result","execution_count":19,"metadata":{},"data":{"text/plain":{"content":"''","content_type":"text/plain"}}}],"key":"JrADz9DYdQ"}],"key":"QqRi8Db5k1"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"The collection can also be deleted via passing its id to ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"jIEfdBFgjI"},{"type":"inlineCode","value":"byoc.delete_collection()","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Wb3rAfuXZ5"},{"type":"text","value":" as shown below:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"qig1C7TSQS"}],"key":"o6g68b0Lzy"},{"type":"code","lang":"python","value":"byoc.delete_collection(my_collection['id'])","position":{"start":{"line":2,"column":1},"end":{"line":4,"column":1}},"key":"byr55obh84"}],"key":"BCzrTKA9VX"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Trying to access this collection now will fali.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"iWf3Ljw9pA"}],"key":"Op0GniEWf5"}],"key":"eIGuEhjEvJ"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"try:\n    deleted_collection = byoc.get_collection([x for x in my_collections if x['id']==created_collection_id][0])\nexcept DownloadFailedException as e:\n    print(e)","key":"De1azdxAa7"},{"type":"output","id":"sH-xlqk7qI7HwxS83W2Uy","data":[{"name":"stdout","output_type":"stream","text":"Failed to download from:\nhttps://services.sentinel-hub.com/api/v1/byoc/collections/1ad2841e-3087-439f-9c82-0fcc8c8d68bc\nwith HTTPError:\n404 Client Error: Not Found for url: https://services.sentinel-hub.com/api/v1/byoc/collections/1ad2841e-3087-439f-9c82-0fcc8c8d68bc\nServer response: \"{\"status\": 404, \"reason\": \"Not Found\", \"message\": \"Collection 1ad2841e-3087-439f-9c82-0fcc8c8d68bc not found.\", \"code\": \"COMMON_NOT_FOUND\"}\"\n"}],"key":"rVXSXGypOE"}],"key":"zx3lIH4IN8"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Manage BYOC tiles (cogs in the collection)","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"y2KtC7sIZk"}],"identifier":"manage-byoc-tiles-cogs-in-the-collection","label":"Manage BYOC tiles (cogs in the collection)","html_id":"manage-byoc-tiles-cogs-in-the-collection","implicit":true,"key":"LodcF6SZhz"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Your data needs to be organized into collections of tiles. Each tile needs to contain a set of bands and (optionally) an acquisition date and time. Tiles with the same bands can be grouped into collections. Think of the Sentinel-2 data source as a collection of Sentinel-2 tiles.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"oA139dvqlC"}],"key":"x4sZmEIAvz"},{"type":"paragraph","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Tiles have to be on an s3 bucket and need to be in COG format. We will not go into details about the COGification process; users can have a look at the documentation or use the BYOC tool that will take care of creating a collection and ingesting the tiles for you.","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"tQj53qwHnb"}],"key":"JqlR8yMTJu"}],"key":"pBZBT5TBwA"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Creating a new tile (and ingesting it to collection)","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"HWJmPVbkf9"}],"identifier":"creating-a-new-tile-and-ingesting-it-to-collection","label":"Creating a new tile (and ingesting it to collection)","html_id":"creating-a-new-tile-and-ingesting-it-to-collection","implicit":true,"key":"ZW1EmBxkRx"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"When we create a new tile and add it to the collection, the ingestion process on the Sentinel-Hub side will happen, checking if the tile corresponds to the COG specifications as well as if it conforms to the collection. For more information refer to the ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"cRPdjV7vdB"},{"type":"link","url":"https://docs.sentinel-hub.com/api/latest/api/byoc/","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Bring Your Own COG API documentation","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"DiKkGlYusT"}],"urlSource":"https://docs.sentinel-hub.com/api/latest/api/byoc/","key":"tbrS6Q3KXv"},{"type":"text","value":".","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"n9cZNJao58"}],"key":"WEPNlytNcR"},{"type":"paragraph","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"The simplest way to create a new tile is by using the ","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"EBHzcGrKMe"},{"type":"inlineCode","value":"ByocTile","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"FlZv2UrQuB"},{"type":"text","value":" dataclass, which will complain if the required fields are missing. In the following cell we will show how to ingest ","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"Vl48yY0jN0"},{"type":"link","url":"https://registry.opendata.aws/sentinel-s2-l2a-mosaic-120/","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Sentinel-2 L2A 120m Mosaic","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"FO2HCCs63n"}],"urlSource":"https://registry.opendata.aws/sentinel-s2-l2a-mosaic-120/","key":"lJJN934BIB"},{"type":"text","value":" data listed on open registry data on AWS.","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"xz72q5ItcC"}],"key":"hASVs3ZI0N"}],"key":"iWL05Hq6PM"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"new_tile = ByocTile(path='2019/11/27/28V/(BAND).tif',\n                    sensing_time=dt.datetime(2019, 11, 27, 0, 0, 0)\n                   )","key":"Oa7X9xzXLo"},{"type":"output","id":"BCehmPZ_Jeej0ElvDPKnD","data":[],"key":"ItzvA8KJ6H"}],"key":"EvhEArq3ym"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Note:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"xeNEZlYcub"}],"key":"QlW7BhOBUi"}],"key":"YCxcVOJDKh"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":2,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":2,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"The most important field of the tile is its ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"bgTgENLVtI"},{"type":"inlineCode","value":"path","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"wN2C92cBxX"},{"type":"text","value":" on an s3 bucket. For example, if your band files are stored in ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"YJItPfKBJM"},{"type":"inlineCode","value":"s3://bucket-name/folder/","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"D21PcWcg7B"},{"type":"text","value":", then set ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"JfjjIwgbGd"},{"type":"inlineCode","value":"folder","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"U5vIdxDJOr"},{"type":"text","value":" as the tile path. In this case, the band names will equal the file names. For example, the band B1 corresponds to the file ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"aIdrXanfH5"},{"type":"inlineCode","value":"s3://bucket-name/folder/B1.tiff","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"GCBekafy9f"},{"type":"text","value":". If your file names have something other than just the band name, such as a prefix, this is fine as long as the prefix is the same for all files. In this case, the path needs to include this prefix and also the band placeholder: ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"ItVksNqlrT"},{"type":"inlineCode","value":"(BAND)","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"LGG1dJluAm"},{"type":"text","value":". Adding the extension is optional. For example, this is what would happen if you would use the following path ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"gKcR5nnrdz"},{"type":"inlineCode","value":"folder/tile_1_(BAND)_2019.tiff","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"xL56ErH9R7"},{"type":"text","value":" for the following files:","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"hESvrgGUaH"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":3,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"inlineCode","value":"s3://bucket-name/folder/tile_1_B1_2019.tiff","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"UC72krxawN"},{"type":"text","value":" - the file would be used, the band name would be B1","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"vL9BWaKTGc"}],"key":"ZcIQb7RGHU"},{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"inlineCode","value":"s3://bucket-name/folder/tile_1_B2_2019.tiff","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"zHUCZzg3BF"},{"type":"text","value":" - the file would be used, the band name would be B2","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"BQ14n2BGaW"}],"key":"s08xbEFrI0"},{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"inlineCode","value":"s3://bucket-name/folder/tile_2_B1_2019.tiff","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"ck0uGCDURb"},{"type":"text","value":" - the file would not be used","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"IrWBrzebEI"}],"key":"Bt6dmBZL9m"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"inlineCode","value":"s3://bucket-name/folder/tile_2_B2_2019.tiff","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"pSICqNjRml"},{"type":"text","value":" - the file would not be used","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"aMoPiOXXdG"}],"key":"jTHKFPDqDh"}],"key":"dGjAFkrnGy"}],"key":"GLdD3JWppf"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"inlineCode","value":"ByocTile","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"zRohXTwNnI"},{"type":"text","value":" takes ","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"UdAwFZEJSf"},{"type":"inlineCode","value":"sensing_time","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"tdp2s4huW6"},{"type":"text","value":" as optional parameters, but setting the ","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"qBNLkHlu83"},{"type":"inlineCode","value":"sensing_time","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"cvO2KVsYZ0"},{"type":"text","value":" is highly recommended since it makes the collection “temporal” and help you search for the data with Sentinel Hub services.","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"UF14KXFYND"}],"key":"XdvombTgTj"},{"type":"listItem","spread":true,"position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"inlineCode","value":"tile_geometry","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"Rix0UFqiCq"},{"type":"text","value":" is optional as it is the bounding box of the tile and will be read from COG file.","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"E8TnXOXs1Y"}],"key":"XdhzmuYa4l"},{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"inlineCode","value":"cover_geometry","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"zYxbiGpGzp"},{"type":"text","value":" is the geometry of where the data (within the bounding box) is and can be useful for optimized search as an optional parameter. For a good explanation of the ","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"WdXFOaNeJw"},{"type":"inlineCode","value":"coverGeometry","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"vLdWmBLFNc"},{"type":"text","value":" please see ","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"mElvuAMrRQ"},{"type":"link","url":"https://docs.sentinel-hub.com/api/latest/data/byoc/#a-note-about-cover-geometries","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"docs","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"B2IsvxupCI"}],"urlSource":"https://docs.sentinel-hub.com/api/latest/data/byoc/#a-note-about-cover-geometries","key":"lLw9RV67r7"},{"type":"text","value":".","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"s8nJQLq2KJ"}],"key":"In8P4Sbwly"}],"key":"KPTDtGklyt"}],"key":"Ym9WhXWfFZ"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Let’s ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"q9YbvcaU3A"},{"type":"crossReference","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"create a new collection","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"S9gWCthzZq"}],"identifier":"create-new-collection","label":"Create-new-collection","kind":"heading","template":"{name}","resolved":true,"html_id":"create-new-collection","key":"vCUGAYEIPB"},{"type":"text","value":" for these tiles.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ZlCNFsbuh2"}],"key":"RIPGLI7nFq"}],"key":"lowbarmHud"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"new_collection = ByocCollection(name='byoc-s2l2a-120m-mosaic', s3_bucket='sentinel-s2-l2a-mosaic-120')\ncreated_collection = byoc.create_collection(new_collection)","key":"NFy7KUQDI0"},{"type":"output","id":"Fse54ChUl58R_4rOifzdx","data":[],"key":"KipyKC0gj2"}],"key":"XbdYxu1rdX"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"created_tile = byoc.create_tile(created_collection, new_tile)","key":"mgg68BsGe9"},{"type":"output","id":"yMBsFL-VhSjwvndnL3EFV","data":[],"key":"oCgerHVzwy"}],"key":"Cp9vAUcMpe"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"The response from ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"e7wg0b2Cd8"},{"type":"inlineCode","value":"byoc.create_tile","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"RAo5d4iIOz"},{"type":"text","value":" has a valid ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"JuXGAPZRYm"},{"type":"inlineCode","value":"id","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"rP1RuM5S2x"},{"type":"text","value":", and its ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"NiIzQ894a5"},{"type":"inlineCode","value":"status","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"JkEViL6DH3"},{"type":"text","value":" is set to ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"SVyOgseonw"},{"type":"inlineCode","value":"WAITING","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Km31lyGqpP"},{"type":"text","value":". Checking the tile ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"YlZSAvtnHA"},{"type":"inlineCode","value":"status","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"hw6bsQxtyA"},{"type":"text","value":" after a while (by ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"LirE9b2Oma"},{"type":"crossReference","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"requesting this tile","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"D7Id5K9C2s"}],"identifier":"get-tiles-from-your-collection","label":"Get-tiles-from-your-collection","kind":"heading","template":"{name}","resolved":true,"html_id":"get-tiles-from-your-collection","key":"ORdBLAGTzb"},{"type":"text","value":") will tell you if it has been ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"jSqoGJnANB"},{"type":"inlineCode","value":"INGESTED","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"n4h7U7JygD"},{"type":"text","value":" or if the ingestion procedure ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"tmbuRg5SLJ"},{"type":"inlineCode","value":"FAILED","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"GO0PIiIKS1"},{"type":"text","value":". In case of failure, additional information (with the cause of failure) will be available in the tile ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"g7NKfqK8wO"},{"type":"inlineCode","value":"additional_data","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"znbPwLt2aJ"},{"type":"text","value":".","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"uXAl1v8cG2"}],"key":"GlyFxhWLHh"}],"key":"VnzvrpTW9N"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"created_tile","key":"otJIweqc3N"},{"type":"output","id":"p6Gbmzt-DgBo4mydEo6IA","data":[{"output_type":"execute_result","execution_count":24,"metadata":{},"data":{"text/plain":{"content":"{'id': 'cd0099f1-ef82-4067-8a9f-5f289c3d62c0',\n 'created': '2022-06-20T13:25:59.773596Z',\n 'sensingTime': '2019-11-27T00:00:00Z',\n 'path': '2019/11/27/28V/(BAND).tif',\n 'status': 'WAITING'}","content_type":"text/plain"}}}],"key":"pmX2AoRVGC"}],"key":"gHlu7BhiYX"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Add multiple tiles to a single collection","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"MbaCCQVI1p"}],"identifier":"add-multiple-tiles-to-a-single-collection","label":"Add multiple tiles to a single collection","html_id":"add-multiple-tiles-to-a-single-collection","implicit":true,"key":"JGggoCrjca"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"A data collection can for sure contain multiple tiles. It is important to know that adding multiple tiles will work only if these tiles have the same bands. Let’s add more tiles from the ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"dsHbjzt2jd"},{"type":"link","url":"https://registry.opendata.aws/sentinel-s2-l2a-mosaic-120/","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Sentinel-2 L2A 120m Mosaic","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"Ho2KENXh90"}],"urlSource":"https://registry.opendata.aws/sentinel-s2-l2a-mosaic-120/","key":"ROgMEXLrQZ"},{"type":"text","value":" listed on the open data registry on AWS to the collection.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"dBxxx4W8eH"}],"key":"VHlOWj6uPO"},{"type":"paragraph","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"We first define a function to get a list of paths for each tile:","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"bGHDn4Kwux"}],"key":"ZlBqdVxSUi"}],"key":"DgE7btmswL"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"def list_objects_path(bucket, aws_access_key_id, aws_secret_access_key, y=None, m=None, d=None):\n    tiles_path = []\n    client = boto3.client('s3', aws_access_key_id=aws_access_key_id, aws_secret_access_key=aws_secret_access_key)\n    result = client.list_objects(Bucket=bucket, Delimiter='/')\n    for year in result.get('CommonPrefixes')[:y]:\n        year_result = client.list_objects(Bucket=bucket, Delimiter='/', Prefix=year.get('Prefix'))\n        for month in year_result.get('CommonPrefixes')[:m]:\n            month_result = client.list_objects(Bucket=bucket, Delimiter='/', Prefix=month.get('Prefix'))\n            for day in month_result.get('CommonPrefixes')[:d]:\n                day_result = client.list_objects(Bucket=bucket, Delimiter='/', Prefix=day.get('Prefix'))\n                for tile in day_result.get('CommonPrefixes'):\n                    tiles_path.append(tile.get('Prefix'))\n    return tiles_path","key":"gm8B0gOakb"},{"type":"output","id":"aIuaXq9GxDIs6M8LzBiBe","data":[],"key":"YhDE5u5sZ4"}],"key":"uc21aJfHnJ"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Next we obtain a list of paths for tiles available on ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"WXHFNfteYu"},{"type":"inlineCode","value":"s3://sentinel-s2-l2a-mosaic-120/2019/1/1/","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"c5fJtsQKhz"},{"type":"text","value":".","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"zEg8LCFybV"}],"key":"Y4vg946sck"}],"key":"XI98yp6Fvo"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"tiles_path = list_objects_path('sentinel-s2-l2a-mosaic-120', config.aws_access_key_id, config.aws_secret_access_key, y=1, m=1, d=1)","key":"Zxo1eKGQZ7"},{"type":"output","id":"KEczzIYuT8C90oEUugI7G","data":[],"key":"uDQzIKGnpS"}],"key":"yPYAk30z1s"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Then we can add tiles to the collection with a ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"pJEzmcWDtA"},{"type":"inlineCode","value":"for","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"i8zSL7DjbQ"},{"type":"text","value":" loop.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"bEBz2TunJF"}],"key":"OOBvn6lwUv"}],"key":"iG1Cb9bKSZ"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"for tile in tiles_path:\n    byoc_tile = ByocTile(path=f'{tile}(BAND).tif', \n                         sensing_time=dt.datetime(int(tile.split('/')[0]), \n                                                  int(tile.split('/')[1]), \n                                                  int(tile.split('/')[2]), \n                                                  0, \n                                                  0, \n                                                  0)\n                        )\n    byoc.create_tile(created_collection, byoc_tile)","key":"xdL4Ki1i5i"},{"type":"output","id":"Ck9BkJ-Covx7jb99-Kldb","data":[],"key":"LlLuCRdL9A"}],"key":"GfzbeN72a4"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Note:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"zGetWIHhb1"}],"key":"WpHbZIUYK1"},{"type":"text","value":" The tile ingesting process could take some time, please wait a few more minutes after the cell has done running before heading to the next step.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"gBFrElYHuh"}],"key":"AaEfqS9ufO"}],"key":"y3vPOzIACh"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Get tiles from your collection","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"B0LLmFvT8E"}],"identifier":"get-tiles-from-your-collection","label":"Get tiles from your collection","html_id":"get-tiles-from-your-collection","implicit":true,"key":"JO5dHvpAy3"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"After ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"ILmwYW2LxI"},{"type":"inlineCode","value":"byoc.create_tile","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"TbTkmLfuWC"},{"type":"text","value":" being executed, we can request the tile from the collection where it is ingested. To request one specific tile in the collection, you can do it by passing the collection id and the tile id to the ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"WckFO6Gfo7"},{"type":"inlineCode","value":"get_tile","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"BAiCfImGSK"},{"type":"text","value":" method.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"JmAeB77Fn6"}],"key":"GQequnISrV"}],"key":"mfnJRLEpZV"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"tile = byoc.get_tile(collection=created_collection['id'], tile=created_tile['id'])","key":"Yj7MeTuvat"},{"type":"output","id":"xn54vvsya6X_W7sc1qKzm","data":[],"key":"karGLFdW4h"}],"key":"YRhP3bdoNL"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"tile","key":"VKWCABFWh8"},{"type":"output","id":"eekQKLHoB65dHWiG5n0CR","data":[{"output_type":"execute_result","execution_count":29,"metadata":{},"data":{"text/plain":{"content":"{'id': 'cd0099f1-ef82-4067-8a9f-5f289c3d62c0',\n 'created': '2022-06-20T13:25:59.773596Z',\n 'sensingTime': '2019-11-27T00:00:00Z',\n 'coverGeometry': {'type': 'Polygon',\n  'crs': {'type': 'name',\n   'properties': {'name': 'urn:ogc:def:crs:EPSG::32628'}},\n  'coordinates': [[[299999.9980359557, 6899880.000729979],\n    [600120.0000155062, 6899880.00067825],\n    [600120.0000231846, 7100040.000720726],\n    [299999.9970628682, 7100040.000814738],\n    [299999.9980359557, 6899880.000729979]]]},\n 'tileGeometry': {'type': 'Polygon',\n  'crs': {'type': 'name',\n   'properties': {'name': 'urn:ogc:def:crs:EPSG::32628'}},\n  'coordinates': [[[300000.0, 7100040.0],\n    [600120.0, 7100040.0],\n    [600120.0, 6899880.0],\n    [300000.0, 6899880.0],\n    [300000.0, 7100040.0]]]},\n 'path': '2019/11/27/28V/(BAND).tif',\n 'status': 'INGESTED',\n 'additionalData': {'hasAddedPoints': True,\n  'filesMetadata': {'B02': {'headerSize': 1328,\n    'etag': '\"838a04acfa29e10b3b0a972f9ff2f658\"'},\n   'B03': {'headerSize': 1328, 'etag': '\"bc692959f00b3186efbab64853f14bbe\"'},\n   'B04': {'headerSize': 1328, 'etag': '\"26de702b115d976797cdfd00ad6f7f10\"'},\n   'B08': {'headerSize': 1328, 'etag': '\"8c638bf4ad45d2bf606f458bdc9cc165\"'},\n   'B11': {'headerSize': 1328, 'etag': '\"1179bd6c9750c4acc998346864587fe6\"'},\n   'B12': {'headerSize': 1328, 'etag': '\"826091544f541a597651007676765a73\"'},\n   'dataMask': {'headerSize': 1328,\n    'etag': '\"183b03ed56250b2624322e5179db585d\"'}},\n  'minMetersPerPixel': 120.0,\n  'maxMetersPerPixel': 960.0}}","content_type":"text/plain"}}}],"key":"UZpoB0UJXT"}],"key":"rWCbGzQ9d9"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"You can of course retrieve all tiles into a list.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"hRncqIORvV"}],"key":"hFgtE6DtYo"}],"key":"L4iilSxMLg"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"tiles = list(byoc.iter_tiles(created_collection))","key":"cHIB8MVNyP"},{"type":"output","id":"eVpnd30VAC6uyPY_sAHWO","data":[],"key":"Da8hHmFdua"}],"key":"HsGxHrjycT"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"In cases where you have a large collection with a lot of tiles and you would only like to load tile info for a few tiles, the following code using ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"TUoww2DPyB"},{"type":"inlineCode","value":"next()","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"unznsvc0Wx"},{"type":"text","value":" would be a good option for you:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"d1cWDHQqnz"}],"key":"Cxzvim5XFr"},{"type":"code","lang":"python","value":"tile = next(byoc.iter_tiles(created_collection))","position":{"start":{"line":2,"column":1},"end":{"line":4,"column":1}},"key":"MrYKhX3d9m"},{"type":"paragraph","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"To convert it to ByocTile dataclass using the code below:","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"hFFOXP9osj"}],"key":"VjLPxo98WK"},{"type":"code","lang":"python","value":"tile = ByocTile.from_dict(next(byoc.iter_tiles(created_collection)))","position":{"start":{"line":7,"column":1},"end":{"line":9,"column":1}},"key":"g90eRTqacD"}],"key":"wpAMu3bPqR"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Let’s take a look at the keys of the first dictionary, which contains the info of the first tile, in the returned list.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"w1EAbXSWOn"}],"key":"L8kNZTOujF"}],"key":"y1zCen5lJ4"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"list(tiles[0].keys())","key":"UP2vql8GIl"},{"type":"output","id":"SXvERFL5wUcwsday1XgZj","data":[{"output_type":"execute_result","execution_count":31,"metadata":{},"data":{"text/plain":{"content":"['id',\n 'created',\n 'sensingTime',\n 'coverGeometry',\n 'tileGeometry',\n 'path',\n 'status',\n 'additionalData']","content_type":"text/plain"}}}],"key":"iJgiyZzY1m"}],"key":"sD3w2R4v3A"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"To check if there’s any tile failed to be ingested, run the code below:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"tqSd0CVR0C"}],"key":"gLSK5IIsmj"}],"key":"mRnX2xkYLB"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"tiles_failed_to_be_ingested = [x['path'] for x in tiles if x['status']=='FAILED']\ntiles_failed_to_be_ingested","key":"zJB2ZlgtVp"},{"type":"output","id":"ubvPAg8GcNkI5kV-EE7Ox","data":[{"output_type":"execute_result","execution_count":32,"metadata":{},"data":{"text/plain":{"content":"[]","content_type":"text/plain"}}}],"key":"OO4wnxJLNx"}],"key":"KPvKo1XzWF"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Visualize the tiles in your collection","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"pKrVgtPE6g"}],"identifier":"visualize-the-tiles-in-your-collection","label":"Visualize the tiles in your collection","html_id":"visualize-the-tiles-in-your-collection","implicit":true,"key":"MrNzae8Z9F"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Using ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"wAMm4HefFv"},{"type":"inlineCode","value":"ByocTile","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"LMcOHW7kmx"},{"type":"text","value":" dataclass, which will properly parse tile geometries, date-time strings, etc., one can create a ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"b5QtboDXpr"},{"type":"inlineCode","value":"geopandas.GeoDataFrame","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"FSqvracCRU"},{"type":"text","value":".","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"PNzMeyJALD"}],"key":"SHmYEGUEKY"},{"type":"paragraph","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"strong","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Note:","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"XrMCS7UCdS"}],"key":"fVkGd7trGK"},{"type":"text","value":" the geometries can be in different coordinate reference systems, so a transform to a common CRS might be needed.","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"qaF9JPJQT9"}],"key":"eIl2IO6nwE"}],"key":"XpKVXsaSCj"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"tile_iterator = byoc.iter_tiles(created_collection)","key":"Dqff8w3V8J"},{"type":"output","id":"tVV1JeEDGtAxdzcw1YMMM","data":[],"key":"WymnVH819q"}],"key":"bGZZO2ojGT"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"tiles_for_visualized = []\nfor i in range(100):\n    tiles_for_visualized.append(ByocTile.from_dict(next(tile_iterator)))\n\ntiles_gdf = gpd.GeoDataFrame(tiles_for_visualized, geometry=[t.cover_geometry.transform(CRS.WGS84).geometry for t in tiles_for_visualized], crs='epsg:4326')\ntiles_gdf.head()","key":"flz2zd0muT"},{"type":"output","id":"XaS6gbquy-W5F5ATxCAAA","data":[{"output_type":"execute_result","execution_count":34,"metadata":{},"data":{"text/html":{"content":"<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>path</th>\n      <th>other_data</th>\n      <th>status</th>\n      <th>tile_id</th>\n      <th>tile_geometry</th>\n      <th>cover_geometry</th>\n      <th>created</th>\n      <th>sensing_time</th>\n      <th>additional_data</th>\n      <th>geometry</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>2019/1/1/57W/(BAND).tif</td>\n      <td>{}</td>\n      <td>INGESTED</td>\n      <td>0024e122-356c-495d-a467-43b46f1d8920</td>\n      <td>Geometry(POLYGON ((399960 8000040, 700080 8000...</td>\n      <td>Geometry(POLYGON ((399959.9999769505 7099920.0...</td>\n      <td>2022-06-20 13:27:28.965445+00:00</td>\n      <td>2019-01-01 00:00:00+00:00</td>\n      <td>{'hasAddedPoints': True, 'filesMetadata': {'B0...</td>\n      <td>POLYGON ((156.95358 64.01166, 163.08813 63.968...</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>2019/1/1/08U/(BAND).tif</td>\n      <td>{}</td>\n      <td>INGESTED</td>\n      <td>00413aab-7480-483e-b25b-4e702df31172</td>\n      <td>Geometry(POLYGON ((600000 6200040, 800040 6200...</td>\n      <td>Geometry(POLYGON ((600000.0000022026 5699880.0...</td>\n      <td>2022-06-20 13:27:03.928086+00:00</td>\n      <td>2019-01-01 00:00:00+00:00</td>\n      <td>{'hasAddedPoints': True, 'filesMetadata': {'B0...</td>\n      <td>POLYGON ((-133.56116 51.44127, -130.68874 51.3...</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>2019/1/1/15X/(BAND).tif</td>\n      <td>{}</td>\n      <td>INGESTED</td>\n      <td>0107d310-9112-4977-80d7-572e17f68654</td>\n      <td>Geometry(POLYGON ((399960 8100000, 700080 8100...</td>\n      <td>Geometry(POLYGON ((399959.99978184653 7999920....</td>\n      <td>2022-06-20 13:27:06.633997+00:00</td>\n      <td>2019-01-01 00:00:00+00:00</td>\n      <td>{'hasAddedPoints': True, 'filesMetadata': {'B0...</td>\n      <td>POLYGON ((-95.91354 72.07680, -87.18720 72.011...</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>2019/1/1/18J/(BAND).tif</td>\n      <td>{}</td>\n      <td>INGESTED</td>\n      <td>010d8268-6b01-42a6-a99d-f432f16dcc99</td>\n      <td>Geometry(POLYGON ((699960 7300000, 900120 7300...</td>\n      <td>Geometry(POLYGON ((699960.00002447 6499960.000...</td>\n      <td>2022-06-20 13:27:07.936745+00:00</td>\n      <td>2019-01-01 00:00:00+00:00</td>\n      <td>{'hasAddedPoints': True, 'filesMetadata': {'B0...</td>\n      <td>POLYGON ((-72.89193 -31.61814, -70.78540 -31.5...</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>2019/1/1/16R/(BAND).tif</td>\n      <td>{}</td>\n      <td>INGESTED</td>\n      <td>01140390-6bdd-4506-a425-0dc1008b6e82</td>\n      <td>Geometry(POLYGON ((199980 3500040, 800100 3500...</td>\n      <td>Geometry(POLYGON ((199979.99971882073 3099959....</td>\n      <td>2022-06-20 13:27:06.834518+00:00</td>\n      <td>2019-01-01 00:00:00+00:00</td>\n      <td>{'hasAddedPoints': True, 'filesMetadata': {'B0...</td>\n      <td>POLYGON ((-90.05032 27.99104, -83.94887 27.991...</td>\n    </tr>\n  </tbody>\n</table>\n</div>","content_type":"text/html"},"text/plain":{"content":"                      path other_data    status  \\\n0  2019/1/1/57W/(BAND).tif         {}  INGESTED   \n1  2019/1/1/08U/(BAND).tif         {}  INGESTED   \n2  2019/1/1/15X/(BAND).tif         {}  INGESTED   \n3  2019/1/1/18J/(BAND).tif         {}  INGESTED   \n4  2019/1/1/16R/(BAND).tif         {}  INGESTED   \n\n                                tile_id  \\\n0  0024e122-356c-495d-a467-43b46f1d8920   \n1  00413aab-7480-483e-b25b-4e702df31172   \n2  0107d310-9112-4977-80d7-572e17f68654   \n3  010d8268-6b01-42a6-a99d-f432f16dcc99   \n4  01140390-6bdd-4506-a425-0dc1008b6e82   \n\n                                       tile_geometry  \\\n0  Geometry(POLYGON ((399960 8000040, 700080 8000...   \n1  Geometry(POLYGON ((600000 6200040, 800040 6200...   \n2  Geometry(POLYGON ((399960 8100000, 700080 8100...   \n3  Geometry(POLYGON ((699960 7300000, 900120 7300...   \n4  Geometry(POLYGON ((199980 3500040, 800100 3500...   \n\n                                      cover_geometry  \\\n0  Geometry(POLYGON ((399959.9999769505 7099920.0...   \n1  Geometry(POLYGON ((600000.0000022026 5699880.0...   \n2  Geometry(POLYGON ((399959.99978184653 7999920....   \n3  Geometry(POLYGON ((699960.00002447 6499960.000...   \n4  Geometry(POLYGON ((199979.99971882073 3099959....   \n\n                           created              sensing_time  \\\n0 2022-06-20 13:27:28.965445+00:00 2019-01-01 00:00:00+00:00   \n1 2022-06-20 13:27:03.928086+00:00 2019-01-01 00:00:00+00:00   \n2 2022-06-20 13:27:06.633997+00:00 2019-01-01 00:00:00+00:00   \n3 2022-06-20 13:27:07.936745+00:00 2019-01-01 00:00:00+00:00   \n4 2022-06-20 13:27:06.834518+00:00 2019-01-01 00:00:00+00:00   \n\n                                     additional_data  \\\n0  {'hasAddedPoints': True, 'filesMetadata': {'B0...   \n1  {'hasAddedPoints': True, 'filesMetadata': {'B0...   \n2  {'hasAddedPoints': True, 'filesMetadata': {'B0...   \n3  {'hasAddedPoints': True, 'filesMetadata': {'B0...   \n4  {'hasAddedPoints': True, 'filesMetadata': {'B0...   \n\n                                            geometry  \n0  POLYGON ((156.95358 64.01166, 163.08813 63.968...  \n1  POLYGON ((-133.56116 51.44127, -130.68874 51.3...  \n2  POLYGON ((-95.91354 72.07680, -87.18720 72.011...  \n3  POLYGON ((-72.89193 -31.61814, -70.78540 -31.5...  \n4  POLYGON ((-90.05032 27.99104, -83.94887 27.991...  ","content_type":"text/plain"}}}],"key":"scg1KVPgXF"}],"key":"DiqfdhVsBz"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"fig, ax = plt.subplots(figsize=(17,8))\ntiles_gdf.plot(ax=ax);","key":"l1w7A0ulZH"},{"type":"output","id":"0mJ5G9OoHLX7hHgtRfUoH","data":[{"output_type":"display_data","metadata":{"needs_background":"light"},"data":{"image/png":{"content_type":"image/png","hash":"db82e270b70202756bbfdcd07e5629f8","path":"/example-viewer/build/db82e270b70202756bbfdcd07e5629f8.png"},"text/plain":{"content":"<Figure size 1224x576 with 1 Axes>","content_type":"text/plain"}}}],"key":"ZNt36qnxKp"}],"key":"uxVOjt8rrG"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"In the above example, the ingested tiles are 100 tiles from the pull out from the ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"KWf9QPTQdm"},{"type":"link","url":"https://registry.opendata.aws/sentinel-s2-l2a-mosaic-120/","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Sentinel-2 L2A 120m Mosaic","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"p1wSWu51dJ"}],"urlSource":"https://registry.opendata.aws/sentinel-s2-l2a-mosaic-120/","key":"WI7o7ABJVF"},{"type":"text","value":" which contains 19869 tiles around the globe, hence the tiles are so sparse in the image above.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"EVqXIW4gHF"}],"key":"NlpSmhlM4e"}],"key":"zovLEG89iL"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Updating and deleting a tile","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"IQqqNNmWiy"}],"identifier":"updating-and-deleting-a-tile","label":"Updating and deleting a tile","html_id":"updating-and-deleting-a-tile","implicit":true,"key":"A4LulmrU3o"}],"key":"bEIkB5cYOa"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Updating and deleting a tile follow the same logic as updating/deleting a collection:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"JdVcrhpasF"}],"key":"nlkUcaW8kE"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"To updatea tile:","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"wvDzqYcBk0"}],"key":"hwMwpt7pN7"}],"key":"Jr2R28Olhm"}],"key":"hn76oY4PDK"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"tile_to_be_updated = byoc.get_tile(collection=created_collection['id'], tile=created_tile['id'])\ntile_to_be_updated['sensingTime'] = '2021-06-29T18:02:34'\nbyoc.update_tile(created_collection, tile_to_be_updated)","key":"sKC2wGW4QV"},{"type":"output","id":"_AOTmhBW4SSFmsLgwFThP","data":[{"output_type":"execute_result","execution_count":36,"metadata":{},"data":{"text/plain":{"content":"''","content_type":"text/plain"}}}],"key":"edukogLIEv"}],"key":"TwdqTAmsEo"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"After updating we can see that the ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"MZmDt6aekg"},{"type":"inlineCode","value":"sensingTime","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Q6pyTvoKUS"},{"type":"text","value":" has been changed.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ErxGPOEW53"}],"key":"O0cj8Hzk1n"}],"key":"u70vEx0gbT"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"byoc.get_tile(collection=created_collection['id'], tile=created_tile['id'])['sensingTime']","key":"djHBW5LCBL"},{"type":"output","id":"tvzu5aWjujlQmLjvgQk7J","data":[{"output_type":"execute_result","execution_count":37,"metadata":{},"data":{"text/plain":{"content":"'2021-06-29T18:02:34Z'","content_type":"text/plain"}}}],"key":"HrXfiokCsk"}],"key":"QP1oL3hJK0"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"To delete a tile:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"B3Tx6mveyV"}],"key":"tM85p7fdTx"}],"key":"YnZI8KoB7l"}],"key":"NpDsOuh0m2"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"tile_to_be_deleted = byoc.get_tile(collection=created_collection['id'], tile=created_tile['id'])\nbyoc.delete_tile(created_collection, tile_to_be_deleted)","key":"MXu9b0bVwm"},{"type":"output","id":"z2OAG6XWnYIgXc3E6w05L","data":[{"output_type":"execute_result","execution_count":38,"metadata":{},"data":{"text/plain":{"content":"''","content_type":"text/plain"}}}],"key":"dJSoo5xorG"}],"key":"AQIAVKDhnf"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Now the tile is gone forever.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"mjZYYTM9ya"}],"key":"WeArdEHY3M"}],"key":"YhWNcuNlej"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"tiles = list(byoc.iter_tiles(created_collection))\n[x for x in tiles if x['id']==created_tile['id']]","key":"q0eNcyPiLP"},{"type":"output","id":"_6ID6cMAnHcxkj0BmhoI8","data":[{"output_type":"execute_result","execution_count":39,"metadata":{},"data":{"text/plain":{"content":"[]","content_type":"text/plain"}}}],"key":"zLjxi1fgJS"}],"key":"XVMj5jFEAm"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Retrieve data from collection","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"qq09KPNjcW"}],"identifier":"retrieve-data-from-collection","label":"Retrieve data from collection","html_id":"retrieve-data-from-collection","implicit":true,"key":"rAiFAUMT8n"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Once we have a collection created and its tiles ingested, we can retrieve the data from said collection.\nWe will be using ProcessAPI for this.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"INHhGadBYH"}],"key":"eJdyPimNc8"}],"key":"lBwGhv9iaW"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"data_collection = DataCollection.define_byoc(created_collection['id'])","key":"MribUBlz1i"},{"type":"output","id":"HDLChP-L4N4OWcSgqzx_k","data":[],"key":"k6ouwa3XBm"}],"key":"mxa5iNR4oF"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Alternatively using dataclasee:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"smRdRC8x0Z"}],"key":"mYZTavnxJw"},{"type":"code","lang":"python","value":"data_collection = my_collection_dataclass.to_data_collection()","position":{"start":{"line":2,"column":1},"end":{"line":4,"column":1}},"key":"QzY8M3Q33Q"}],"key":"TWnJIZQKKK"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"tile_time = dt.datetime.fromisoformat(tiles[0]['sensingTime'].split(\"T\")[0])","key":"nueCvbwEoW"},{"type":"output","id":"wmwl8ZBxLijVAiK-yEA_2","data":[],"key":"Md0qrYlvhn"}],"key":"sE6A5vIejG"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"If using dataclass run:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"YRA79oMk6R"}],"key":"BIDL7YqWVq"},{"type":"code","lang":"python","value":"tile_time = tile_dataclass.sensing_time","position":{"start":{"line":2,"column":1},"end":{"line":4,"column":1}},"key":"neuQ9cfc6r"}],"key":"vivf3lDGsa"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"tiles[0]['sensingTime']","key":"igBw31somv"},{"type":"output","id":"nfIvXLR1kyvsrX6Th0-xR","data":[{"output_type":"execute_result","execution_count":42,"metadata":{},"data":{"text/plain":{"content":"'2019-01-01T00:00:00Z'","content_type":"text/plain"}}}],"key":"VJepIYORwn"}],"key":"fgrsNbfNlW"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Below we’re going to request a false color image of Caspian Sea.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"TwfvW1Brd3"}],"key":"ULqbTKLpCz"}],"key":"QQtej9rxmM"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"caspian_sea_bbox = BBox([49.9604, 44.7176, 51.0481, 45.2324], crs=CRS.WGS84)","key":"LYmDciGRRQ"},{"type":"output","id":"l_dudyHks4lPqRfzsvaoq","data":[],"key":"xryxen7Qkw"}],"key":"I7fG9BP62f"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"false_color_evalscript = \"\"\"\n//VERSION=3\nfunction setup() {\n  return {\n    input: [\"B08\",\"B04\",\"B03\", \"dataMask\"],\n    output: { bands: 4 },\n  };\n}\n\nvar f = 2.5/10000;\nfunction evaluatePixel(sample) {\n  return [f*sample.B08, f*sample.B04, f*sample.B03, sample.dataMask];\n}\n\"\"\"\n\nrequest = SentinelHubRequest(\n        evalscript=false_color_evalscript,\n        input_data=[\n            SentinelHubRequest.input_data(\n                data_collection=data_collection,\n                time_interval=tile_time\n            )\n        ],\n        responses=[\n            SentinelHubRequest.output_response('default', MimeType.PNG)\n        ],\n        bbox=caspian_sea_bbox,\n        size=bbox_to_dimensions(caspian_sea_bbox, 100),\n        config=config\n    )","key":"IIqjg64SD7"},{"type":"output","id":"TMvgmka95b1ZF_f9_RcwQ","data":[],"key":"CAGy2MfUSw"}],"key":"NGyxAuT2ra"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"data = request.get_data()[0]","key":"sGwVBaBVuP"},{"type":"output","id":"JwJc9LED7xv4B_aK0w8N2","data":[],"key":"RCcuHGjr7s"}],"key":"qGE5q7qAd2"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"fig, ax = plt.subplots(figsize=(15, 10))\n\nax.imshow(data)\nax.set_title(tile_time.date().isoformat(), fontsize=10)\n\nplt.tight_layout()","key":"poGFLbelaK"},{"type":"output","id":"6kuXYAry-FBeQyTUVdqGX","data":[{"output_type":"display_data","metadata":{"needs_background":"light"},"data":{"image/png":{"content_type":"image/png","hash":"32baf5d4b8571ff83cbaafc602207520","path":"/example-viewer/build/32baf5d4b8571ff83cbaafc602207520.png"},"text/plain":{"content":"<Figure size 1080x720 with 1 Axes>","content_type":"text/plain"}}}],"key":"ltfYMm3u7X"}],"key":"BEluXsS8jg"}],"key":"NEOTtQoRaS"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"Custom Script Contest – Urban Growth in Africa","url":"/external-notebooks/eurodatacube/notebooks/notebooks/contributions/edc-africa-cube-africa-custom-contest","group":"Contributions"},"next":{"title":"xcube-gen and xcube-geodb Hands-On Workshop Φ-Week 2020","url":"/external-notebooks/eurodatacube/notebooks/notebooks/contributions/edc-demo-phi-week-v2","group":"Contributions"}}},"domain":"http://localhost:3000"}