{"version":1,"kind":"Notebook","sha256":"eb9fff9204f9df4db6ad9ee170d59d0ae388a217354e36cddea9cef50158069d","slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.sentinelhub-py","location":"/external_notebooks/eurodatacube/notebooks/notebooks/curated/sentinelhub-py.ipynb","dependencies":[],"frontmatter":{"title":"Using Sentinel Hub Process API in EDC: a starter’s guide.","content_includes_title":true,"kernelspec":{"name":"conda-env-users-edc-2023.10-01-py","display_name":"EDC 0.24.5 (Python3)","language":"python"},"github":"https://github.com/eurodatacube/example-viewer","subject":"Euro Data Cube Examples","numbering":{"title":{"offset":5}},"edit_url":"https://github.com/eurodatacube/example-viewer/blob/main/external_notebooks/eurodatacube/notebooks/notebooks/curated/sentinelhub-py.ipynb","thumbnail":"/example-viewer/build/01e22903839391bc356ac886ec2b2fa7.png","exports":[{"format":"ipynb","filename":"sentinelhub-py.ipynb","url":"/example-viewer/build/sentinelhub-py-7e386c9fff4993e7cf351903bf9dc439.ipynb"}]},"widgets":{},"mdast":{"type":"root","children":[{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-10-24T07:58:15.182649Z","iopub.status.busy":"2023-10-24T07:58:15.182255Z","iopub.status.idle":"2023-10-24T07:58:15.238796Z","shell.execute_reply":"2023-10-24T07:58:15.238388Z"},"papermill":{"duration":0.089734,"end_time":"2023-10-24T07:58:15.239791","exception":false,"start_time":"2023-10-24T07:58:15.150057","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"from edc import check_compatibility\ncheck_compatibility(\"user-2023.10-01\", dependencies=[\"SH\"])","visibility":"show","key":"EdLQoTs4Yk"},{"type":"output","id":"OD2UfBryzI8IvJZgSjbr8","data":[{"output_type":"display_data","metadata":{},"data":{"text/html":{"content":"<script type=\"text/javascript\">\n        function toggle(id) {\n            el = document.getElementById(id);\n            el.style.display = el.style.display === \"none\" ? \"block\" : \"none\";\n        }\n    </script>","content_type":"text/html"},"text/plain":{"content":"<IPython.core.display.HTML object>","content_type":"text/plain"}}},{"output_type":"display_data","metadata":{},"data":{"text/html":{"content":"This notebook is compatible with this base image version (user-2023.10-01).","content_type":"text/html"},"text/plain":{"content":"<IPython.core.display.HTML object>","content_type":"text/plain"}}},{"output_type":"display_data","metadata":{},"data":{"text/markdown":{"content":"\n\n---------\n\nThe following environment variables are available:\n\n* `SH_CLIENT_ID`, `SH_INSTANCE_ID`, `SH_CLIENT_NAME`, `SH_CLIENT_SECRET`\n","content_type":"text/markdown"},"text/plain":{"content":"<IPython.core.display.Markdown object>","content_type":"text/plain"}}}],"visibility":"show","key":"uZPnDoM9Ns"}],"visibility":"show","key":"cZyeKvDWLj"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.027883,"end_time":"2023-10-24T07:58:15.317124","exception":false,"start_time":"2023-10-24T07:58:15.289241","status":"completed"},"tags":[]},"children":[{"type":"heading","depth":1,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Using Sentinel Hub Process API in EDC: a starter’s guide.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"mS1gY11LBG"}],"identifier":"using-sentinel-hub-process-api-in-edc-a-starters-guide","label":"Using Sentinel Hub Process API in EDC: a starter’s guide.","html_id":"using-sentinel-hub-process-api-in-edc-a-starters-guide","implicit":true,"key":"oYtRboZczI"},{"type":"thematicBreak","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"GBN2XB8hh3"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Source: ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"KVaZPSQCjr"},{"type":"link","url":"https://sentinelhub-py.readthedocs.io/en/latest/index.html","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Sentinel Hub Python package documentation","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"QDJeqQkztr"}],"urlSource":"https://sentinelhub-py.readthedocs.io/en/latest/index.html","key":"WftAmnh1wh"}],"key":"dPO1zq6MZ8"},{"type":"heading","depth":2,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Getting started with ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"jKgxMQxPPW"},{"type":"inlineCode","value":"sentinelhub-py","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"h2dwrlUoNG"}],"identifier":"getting-started-with-sentinelhub-py","label":"Getting started with sentinelhub-py","html_id":"getting-started-with-sentinelhub-py","implicit":true,"key":"vv5jR8zj2r"},{"type":"paragraph","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"In this demonstration Jupyter Notebook, we will be requesting and exporting analysis-ready Earth Observation data with the Sentinel Hub ","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"cyRUgNWBMd"},{"type":"link","url":"https://docs.sentinel-hub.com/api/latest/api/process/","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Process API","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"Xeuu3bKJlz"}],"urlSource":"https://docs.sentinel-hub.com/api/latest/api/process/","key":"WISUduaPez"},{"type":"text","value":" using the dedicated ","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"VbRKORGc0e"},{"type":"link","url":"https://sentinelhub-py.readthedocs.io/en/latest/index.html","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"sentinelhub-py package","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"kaBSoOmzOv"}],"urlSource":"https://sentinelhub-py.readthedocs.io/en/latest/index.html","key":"qNDqbVtC9N"},{"type":"text","value":" in the EDC EOxHub Workplace. In this notebook we will learn how to:","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"z59CqLqiYL"}],"key":"BXxr7KqRsh"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":9,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"link","url":"#Example-1:-Request-a-true-color-(PNG)-image-on-a-specific-date","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Request a true color (PNG) image on a specific date","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"M4kyJ2W3lg"}],"urlSource":"#Example-1:-Request-a-true-color-(PNG)-image-on-a-specific-date","key":"sObeXOTgUI"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"link","url":"#Example-1.1-Adding-cloud-mask-data","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"Add cloud mask data to the request","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"WjiSpnCZmf"}],"urlSource":"#Example-1.1-Adding-cloud-mask-data","key":"hZa9F2BUz6"}],"key":"z2hrXRFzch"}],"key":"sBAnUEpqOK"}],"key":"jv7XvobR6o"},{"type":"listItem","spread":true,"position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"link","url":"#Example-2:-Request-a-true-color-mosaic-of-least-cloudy-acquisitions","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Request a true color mosaic of least cloudy acquisitions","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"ljw4NZPUKx"}],"urlSource":"#Example-2:-Request-a-true-color-mosaic-of-least-cloudy-acquisitions","key":"JJwokJxFUy"}],"key":"vwHFkItNow"},{"type":"listItem","spread":true,"position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"link","url":"#Example-3:-Request-all-Sentinel-2's-raw-band-values","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Request all Sentinel-2’s raw band values","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"QtgP3OGqT4"}],"urlSource":"#Example-3:-Request-all-Sentinel-2's-raw-band-values","key":"QJBz8ggkke"}],"key":"xoWflaS8ZR"},{"type":"listItem","spread":true,"position":{"start":{"line":13,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"link","url":"#Example-4:-Save-downloaded-data-to-disk-and-read-it-from-disk","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"Save downloaded data to disk and read it from disk","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"ZHJhboMzhq"}],"urlSource":"#Example-4:-Save-downloaded-data-to-disk-and-read-it-from-disk","key":"DSkT3JUMLF"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"link","url":"#Example-4.1:-Save-downloaded-data-directly-to-disk","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"Save downloaded data directly to disk","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"HuMq7xybXP"}],"urlSource":"#Example-4.1:-Save-downloaded-data-directly-to-disk","key":"ICEeFp920J"}],"key":"ErjVSJDOQd"}],"key":"N1O4Sd3itA"}],"key":"FNrNzdWe1E"},{"type":"listItem","spread":true,"position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"link","url":"#Example-5:-Request-other-data-collections-supported-by-sh-py","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"Request other data collections supported by sentinelhub-py","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"eBTi1lyOwv"}],"urlSource":"#Example-5:-Request-other-data-collections-supported-by-sh-py","key":"d78QzmF7sY"}],"key":"KZNzDLdLUB"},{"type":"listItem","spread":true,"position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"link","url":"#Example-6:-Multi-response-request","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"text","value":"Perform a multi-response request","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"klWq8gp307"}],"urlSource":"#Example-6:-Multi-response-request","key":"yncpFVNBw2"}],"key":"HmXvdsLctS"},{"type":"listItem","spread":true,"position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"link","url":"#Example-7:-Request-with-a-raw-dictionary","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"text","value":"Request with a raw dictionary","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"kJkgKUFPk9"}],"urlSource":"#Example-7:-Request-with-a-raw-dictionary","key":"Sz4mOkXcNA"}],"key":"sGU5mFJ0Mk"},{"type":"listItem","spread":true,"position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"link","url":"#Example-8:-Request-multiple-timestamps-data","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"text","value":"Request multiple timestamps data","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"gqn72j51nL"}],"urlSource":"#Example-8:-Request-multiple-timestamps-data","key":"DKs9b3Nm7Q"}],"key":"xKnRef7O4k"}],"key":"pqH075Inhj"}],"visibility":"show","key":"f1EMA6t9qh"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.030899,"end_time":"2023-10-24T07:58:15.401641","exception":false,"start_time":"2023-10-24T07:58:15.370742","status":"completed"},"tags":[]},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Prerequisites","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"U5uOgr0tA8"}],"identifier":"prerequisites","label":"Prerequisites","html_id":"prerequisites","implicit":true,"key":"EikhS7YQwT"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Before acccessing the data, we will start by importing the necessary Python libraries (already configured in your EDC workspace), generate credentials automatically to access the services and define the ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"jVEnRzj315"},{"type":"inlineCode","value":"plot_image","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"YjEg1h6GTW"},{"type":"text","value":" function that can be found in the ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"topHUdGuMx"},{"type":"inlineCode","value":"utils.py","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"cobNIMaRoE"},{"type":"text","value":" ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"ypK5L3g3FR"},{"type":"link","url":"https://github.com/sentinel-hub/sentinelhub-py/blob/master/examples/utils.py","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"file","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"q1x1Sj6epG"}],"urlSource":"https://github.com/sentinel-hub/sentinelhub-py/blob/master/examples/utils.py","data":{"kind":"file","org":"sentinel-hub","repo":"sentinelhub-py","reference":"master","file":"examples/utils.py","raw":"https://raw.githubusercontent.com/sentinel-hub/sentinelhub-py/master/examples/utils.py"},"internal":false,"protocol":"github","key":"oUzN2jgdfz"},{"type":"text","value":" located in Sentinel Hub’s ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Y8xMM9a3tM"},{"type":"link","url":"https://github.com/sentinel-hub/sentinelhub-py","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"GitHub repository","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"XSkWJV2X54"}],"urlSource":"https://github.com/sentinel-hub/sentinelhub-py","error":true,"key":"MIpT8Wv32C"},{"type":"text","value":".","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"dBzZVfdmUt"}],"key":"c0B1Ac4iyL"}],"visibility":"show","key":"RvxcbYRVyP"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.027386,"end_time":"2023-10-24T07:58:15.469611","exception":false,"start_time":"2023-10-24T07:58:15.442225","status":"completed"},"tags":[]},"children":[{"type":"heading","depth":4,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Imports","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"GsbkOaarxX"}],"identifier":"imports","label":"Imports","html_id":"imports","implicit":true,"key":"tbUxbI0iy9"}],"visibility":"show","key":"rvPsozLeGz"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-10-24T07:58:15.542283Z","iopub.status.busy":"2023-10-24T07:58:15.541994Z","iopub.status.idle":"2023-10-24T07:58:16.275602Z","shell.execute_reply":"2023-10-24T07:58:16.275129Z"},"papermill":{"duration":0.763462,"end_time":"2023-10-24T07:58:16.277010","exception":false,"start_time":"2023-10-24T07:58:15.513548","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# EDC libraries\nfrom edc import setup_environment_variables\n\n# Utilities\nimport os\nimport datetime\nimport numpy as np\nimport matplotlib.pyplot as plt\nfrom IPython.display import display, Image\n\n# Sentinel Hub\nfrom sentinelhub import (MimeType, CRS, BBox, SentinelHubRequest, SentinelHubDownloadClient, \n                         DataCollection, bbox_to_dimensions, DownloadRequest, SHConfig)","visibility":"show","key":"hOHwVnRMbN"},{"type":"output","id":"BnytEK_JmgUhdobBMqC6j","data":[],"visibility":"show","key":"DUFIpTRROp"}],"visibility":"show","key":"vCd1kS1nH3"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.025247,"end_time":"2023-10-24T07:58:16.346012","exception":false,"start_time":"2023-10-24T07:58:16.320765","status":"completed"},"tags":[]},"children":[{"type":"heading","depth":4,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Credentials","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"RRwPMDX26m"}],"identifier":"credentials","label":"Credentials","html_id":"credentials","implicit":true,"key":"UxhwUeS9Eu"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Credentials for Sentinel Hub services are automatically injected as environement variables. It is therefore easy to populate Sentinel Hub’s credential manager with the values.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"TU2aaRXwnB"}],"key":"HPAsukxCjO"}],"visibility":"show","key":"FWf5TjVzHu"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-10-24T07:58:16.421849Z","iopub.status.busy":"2023-10-24T07:58:16.421356Z","iopub.status.idle":"2023-10-24T07:58:16.424783Z","shell.execute_reply":"2023-10-24T07:58:16.424346Z"},"papermill":{"duration":0.039716,"end_time":"2023-10-24T07:58:16.425680","exception":false,"start_time":"2023-10-24T07:58:16.385964","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# Pass Sentinel Hub credentials to SHConfig\nconfig = SHConfig()\nconfig.sh_client_id = os.environ[\"SH_CLIENT_ID\"]\nconfig.sh_client_secret = os.environ[\"SH_CLIENT_SECRET\"]","visibility":"show","key":"nZlSXgGSAd"},{"type":"output","id":"VVCXnrNwUxdS2KUZm3gHw","data":[],"visibility":"show","key":"BVcTMUEKvb"}],"visibility":"show","key":"lhnAHVLyHN"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.029287,"end_time":"2023-10-24T07:58:16.496363","exception":false,"start_time":"2023-10-24T07:58:16.467076","status":"completed"},"tags":[]},"children":[{"type":"heading","depth":4,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Utility function for plotting images","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"dNvZA1XSmI"}],"identifier":"utility-function-for-plotting-images","label":"Utility function for plotting images","html_id":"utility-function-for-plotting-images","implicit":true,"key":"VVcX0PpDUJ"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"In the following cell, we define the ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"sW1O5NtMBA"},{"type":"inlineCode","value":"plot_image","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"DGKMKVUhTY"},{"type":"text","value":" function which will be used to display the requested images for all examples demonstrated in this notebook.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"W7ViwHLYmj"}],"key":"gFfexAlxsH"}],"visibility":"show","key":"LuhXgY9Ouk"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-10-24T07:58:16.571117Z","iopub.status.busy":"2023-10-24T07:58:16.570757Z","iopub.status.idle":"2023-10-24T07:58:16.574542Z","shell.execute_reply":"2023-10-24T07:58:16.574116Z"},"papermill":{"duration":0.034914,"end_time":"2023-10-24T07:58:16.575435","exception":false,"start_time":"2023-10-24T07:58:16.540521","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# Define the plot_image function\ndef plot_image(image, factor=1.0, clip_range = None, **kwargs):\n    \"\"\"\n    Utility function for plotting RGB images.\n    \"\"\"\n    fig, ax = plt.subplots(nrows=1, ncols=1, figsize=(15, 15))\n    if clip_range is not None:\n        ax.imshow(np.clip(image * factor, *clip_range), **kwargs)\n    else:\n        ax.imshow(image * factor, **kwargs)\n    ax.set_xticks([])\n    ax.set_yticks([])","visibility":"show","key":"YdtKXVev4A"},{"type":"output","id":"eaXWJktjo9Oy1X-9WBD1-","data":[],"visibility":"show","key":"Qmbg7iRFYC"}],"visibility":"show","key":"CqQfSXaBin"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-10-24T07:58:16.643794Z","iopub.status.busy":"2023-10-24T07:58:16.643496Z","iopub.status.idle":"2023-10-24T07:58:16.649760Z","shell.execute_reply":"2023-10-24T07:58:16.649377Z"},"papermill":{"duration":0.037264,"end_time":"2023-10-24T07:58:16.650832","exception":false,"start_time":"2023-10-24T07:58:16.613568","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# Configure plots for inline use in Jupyter Notebook\n%matplotlib inline","visibility":"show","key":"iM2kuNe9U2"},{"type":"output","id":"A51eCxZ3pCBwtLR7WxWgE","data":[],"visibility":"show","key":"Xtj8qCRtw9"}],"visibility":"show","key":"Bt8JRywubn"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.028023,"end_time":"2023-10-24T07:58:16.724769","exception":false,"start_time":"2023-10-24T07:58:16.696746","status":"completed"},"tags":[]},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Setting area of interest (AOI)","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ZKekfkiaWt"}],"identifier":"setting-area-of-interest-aoi","label":"Setting area of interest (AOI)","html_id":"setting-area-of-interest-aoi","implicit":true,"key":"RzMHhH9qd2"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"We will download Sentinel-2 imagery of ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"qgyCVMDWlu"},{"type":"link","url":"https://en.wikipedia.org/wiki/Betsiboka_River","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Betsiboka Estuary","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"MGKhZx8B2p"}],"urlSource":"https://en.wikipedia.org/wiki/Betsiboka_River","data":{"page":"Betsiboka_River","wiki":"https://en.wikipedia.org/","lang":"en"},"internal":false,"protocol":"wiki","key":"t1wtWMkFWz"},{"type":"text","value":" such as the one shown below (taken by Sentinel-2 on 2017-12-15):","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"B1eZXFFJR3"}],"key":"XOwqzlDLJo"}],"visibility":"show","key":"IilkhmkUIc"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.025774,"end_time":"2023-10-24T07:58:16.790076","exception":false,"start_time":"2023-10-24T07:58:16.764302","status":"completed"},"tags":[]},"children":[{"type":"image","url":"/example-viewer/build/01e22903839391bc356ac886ec2b2fa7.png","alt":"Betsiboka Estuary","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"V6VPxR5uOx","urlSource":"https://sentinelhub-py.readthedocs.io/en/latest/_images/wms_TRUE_COLOR_EPSG4326_-16.15_46.16_-15.58_46.51_2017-12-15T07-12-03_512X856.png"}],"visibility":"show","key":"I2OHJUgEHz"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.026899,"end_time":"2023-10-24T07:58:16.855920","exception":false,"start_time":"2023-10-24T07:58:16.829021","status":"completed"},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"The bounding box in ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Fw3V8gDeIq"},{"type":"inlineCode","value":"WGS84","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"oRLx34TngX"},{"type":"text","value":" coordinate system is ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"CqlwlzktPB"},{"type":"inlineCode","value":"[46.16, -16.15, 46.51, -15.58]","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"LPDGAKzeBY"},{"type":"text","value":" (longitude and latitude coordinates of lower left and upper right corners). You can get the bbox for a different area at the ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"aBqjfi90Sn"},{"type":"link","url":"http://bboxfinder.com/","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"bboxfinder","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"WN0TRXGFWa"}],"urlSource":"http://bboxfinder.com/","key":"guFetqo9wH"},{"type":"text","value":" website.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"jTM9atNRGN"}],"key":"V9htjyJmzI"}],"visibility":"show","key":"JfvRfv7XVx"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.028415,"end_time":"2023-10-24T07:58:16.924242","exception":false,"start_time":"2023-10-24T07:58:16.895827","status":"completed"},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"All requests require bounding box to be given as an instance of ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"A9kUyimsxb"},{"type":"inlineCode","value":"sentinelhub.geometry.BBox","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"LXPH98qEyw"},{"type":"text","value":" with corresponding Coordinate Reference System (","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"AJ4im9FBOl"},{"type":"inlineCode","value":"sentinelhub.constants.CRS","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"sPpl4lJ6Zr"},{"type":"text","value":"). In our case it is in WGS84 and we can use the predefined WGS84 coordinate reference system from ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"BMfH8P4Xm2"},{"type":"inlineCode","value":"sentinelhub.constants.CRS","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"spi8bVtYtz"},{"type":"text","value":".","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"JMrVQYw8qh"}],"key":"AoNW88zDt1"}],"visibility":"show","key":"xfimPDXufA"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-10-24T07:58:16.989795Z","iopub.status.busy":"2023-10-24T07:58:16.989578Z","iopub.status.idle":"2023-10-24T07:58:16.992778Z","shell.execute_reply":"2023-10-24T07:58:16.992260Z"},"papermill":{"duration":0.031069,"end_time":"2023-10-24T07:58:16.993795","exception":false,"start_time":"2023-10-24T07:58:16.962726","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"betsiboka_coords_wgs84 = [46.16, -16.15, 46.51, -15.58]","visibility":"show","key":"QgSvCrBYvf"},{"type":"output","id":"CddVJYLUQzdRh2chiH2sj","data":[],"visibility":"show","key":"nC9gZ0IYTt"}],"visibility":"show","key":"eikaSJm1Bd"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.026196,"end_time":"2023-10-24T07:58:17.060663","exception":false,"start_time":"2023-10-24T07:58:17.034467","status":"completed"},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"When the bounding box bounds have been defined, you can initialize the BBox of the area of interest. Using the bbox_to_dimensions utility function, you can provide the desired resolution parameter of the image in meters and obtain the output image shape.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"tjBmImdH83"}],"key":"Oe9vAHZmjr"}],"visibility":"show","key":"h4EFVbVa0d"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-10-24T07:58:17.129544Z","iopub.status.busy":"2023-10-24T07:58:17.129203Z","iopub.status.idle":"2023-10-24T07:58:17.146453Z","shell.execute_reply":"2023-10-24T07:58:17.145979Z"},"papermill":{"duration":0.04571,"end_time":"2023-10-24T07:58:17.147527","exception":false,"start_time":"2023-10-24T07:58:17.101817","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"resolution = 60\nbetsiboka_bbox = BBox(bbox=betsiboka_coords_wgs84, crs=CRS.WGS84)\nbetsiboka_size = bbox_to_dimensions(betsiboka_bbox, resolution=resolution)\n\nprint(f'Image shape at {resolution} m resolution: {betsiboka_size} pixels')","visibility":"show","key":"njkrNEmjyy"},{"type":"output","id":"W8n6njA0s-kgFHwmOfAoj","data":[{"name":"stdout","output_type":"stream","text":"Image shape at 60 m resolution: (631, 1047) pixels\n"}],"visibility":"show","key":"efLuFUjYuz"}],"visibility":"show","key":"mqa7P3arSU"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.026438,"end_time":"2023-10-24T07:58:17.212596","exception":false,"start_time":"2023-10-24T07:58:17.186158","status":"completed"},"tags":[]},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Example 1: Request a true color (PNG) image on a specific date","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"hoXaXwNX5d"}],"identifier":"example-1-request-a-true-color-png-image-on-a-specific-date","label":"Example 1: Request a true color (PNG) image on a specific date","html_id":"example-1-request-a-true-color-png-image-on-a-specific-date","implicit":true,"key":"udMq0EQyMV"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"We build the request according to the ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"jCG4d6xvFN"},{"type":"link","url":"https://docs.sentinel-hub.com/api/latest/reference/","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"API Reference","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"xaHtQbjcZF"}],"urlSource":"https://docs.sentinel-hub.com/api/latest/reference/","key":"uiI1lv401y"},{"type":"text","value":", using the ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"img5L6jFtY"},{"type":"inlineCode","value":"SentinelHubRequest","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Ci4pDJ0bL8"},{"type":"text","value":" class. Each Process API request also needs an ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"jY7SNUfNOI"},{"type":"link","url":"https://docs.sentinel-hub.com/api/latest/#/Evalscript/V3/README","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"evalscript","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"aDsIZJ1CmP"}],"urlSource":"https://docs.sentinel-hub.com/api/latest/#/Evalscript/V3/README","key":"mgNZIOR9DX"},{"type":"text","value":".","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"nMafhxzGvr"}],"key":"JAuI3W4S59"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"The information that we specify in the ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"CHKV0GGQHc"},{"type":"inlineCode","value":"SentinelHubRequest","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"XjH5DEi3b9"},{"type":"text","value":" object is:","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"mhMD195TeU"}],"key":"EIzbK9sscA"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":6,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"an evalscript,","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"NeOP5nIO02"}],"key":"LJC2hkw8cV"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"a list of input data collections with time interval,","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"Z8rUpjdxC4"}],"key":"eBfAnmSbEn"},{"type":"listItem","spread":true,"position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"a format of the response,","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"K5eT1EbwJd"}],"key":"eqtYvEWI0r"},{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"a bounding box and it’s size (size or resolution).","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"LcxmRPA8w3"}],"key":"rpIR2xRXFi"}],"key":"rCwrrT0XaF"},{"type":"paragraph","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"The evalscript in the example is used to select the appropriate bands. We return the RGB (B04, B03, B02) Sentinel-2 L1C bands.","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"XgcOFeCwn2"}],"key":"MhnzFmASon"},{"type":"paragraph","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"The image from Jun 12th 2020 is downloaded. Without any additional parameters in the evalscript, the downloaded data will correspond to reflectance values in ","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"AR7HQAYxmp"},{"type":"inlineCode","value":"UINT8","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"EFIvVfDmBm"},{"type":"text","value":" format (values in 0-255 range).","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"yy7SKPldYe"}],"key":"lgZAancpVo"}],"visibility":"show","key":"cuOPgKzy6v"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-10-24T07:58:17.281579Z","iopub.status.busy":"2023-10-24T07:58:17.281352Z","iopub.status.idle":"2023-10-24T07:58:17.286230Z","shell.execute_reply":"2023-10-24T07:58:17.285747Z"},"papermill":{"duration":0.035807,"end_time":"2023-10-24T07:58:17.287179","exception":false,"start_time":"2023-10-24T07:58:17.251372","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"evalscript_true_color = \"\"\"\n    //VERSION=3\n\n    function setup() {\n        return {\n            input: [{\n                bands: [\"B02\", \"B03\", \"B04\"]\n            }],\n            output: {\n                bands: 3\n            }\n        };\n    }\n\n    function evaluatePixel(sample) {\n        return [sample.B04, sample.B03, sample.B02];\n    }\n\"\"\"\n\nrequest_true_color = SentinelHubRequest(\n    evalscript=evalscript_true_color,\n    input_data=[\n        SentinelHubRequest.input_data(\n            data_collection=DataCollection.SENTINEL2_L1C,\n            time_interval=('2020-06-12', '2020-06-13'),\n        )\n    ],\n    responses=[\n        SentinelHubRequest.output_response('default', MimeType.PNG)\n    ],\n    bbox=betsiboka_bbox,\n    size=betsiboka_size,\n    config=config\n)","visibility":"show","key":"sME6r1B2EK"},{"type":"output","id":"D8gUoNweCyMZht3EkoxUa","data":[],"visibility":"show","key":"dHOucxq1bj"}],"visibility":"show","key":"hq8YCpVaq9"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-10-24T07:58:17.353393Z","iopub.status.busy":"2023-10-24T07:58:17.353043Z","iopub.status.idle":"2023-10-24T07:58:18.418103Z","shell.execute_reply":"2023-10-24T07:58:18.417366Z"},"papermill":{"duration":1.095641,"end_time":"2023-10-24T07:58:18.421078","exception":false,"start_time":"2023-10-24T07:58:17.325437","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"true_color_imgs = request_true_color.get_data()","visibility":"show","key":"BoQCn2Py24"},{"type":"output","id":"uMQKDBpezDtcUIFCL3ZpB","data":[],"visibility":"show","key":"yev7pfq8RQ"}],"visibility":"show","key":"CxNLYqcP4O"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.044092,"end_time":"2023-10-24T07:58:18.521263","exception":false,"start_time":"2023-10-24T07:58:18.477171","status":"completed"},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"The method ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"yCiGiTi189"},{"type":"inlineCode","value":"get_data()","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"LKUxq1Vxuu"},{"type":"text","value":" will always return a list of length 1 with the available image from the requested time interval in the form of numpy arrays.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"E13IdLosqW"}],"key":"QZdsevTetY"}],"visibility":"show","key":"BnnaGakF2X"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-10-24T07:58:18.592589Z","iopub.status.busy":"2023-10-24T07:58:18.592107Z","iopub.status.idle":"2023-10-24T07:58:18.595889Z","shell.execute_reply":"2023-10-24T07:58:18.595326Z"},"papermill":{"duration":0.032682,"end_time":"2023-10-24T07:58:18.597447","exception":false,"start_time":"2023-10-24T07:58:18.564765","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"print(f'Returned data is of type = {type(true_color_imgs)} and length {len(true_color_imgs)}.')\nprint(f'Single element in the list is of type {type(true_color_imgs[-1])} and has shape {true_color_imgs[-1].shape}')","visibility":"show","key":"F7Os4WbFzZ"},{"type":"output","id":"YWM_HdI6aKFQsB3kT1v3O","data":[{"name":"stdout","output_type":"stream","text":"Returned data is of type = <class 'list'> and length 1.\nSingle element in the list is of type <class 'numpy.ndarray'> and has shape (1047, 631, 3)\n"}],"visibility":"show","key":"pr1WtmhmCA"}],"visibility":"show","key":"akE02i27G5"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-10-24T07:58:18.667461Z","iopub.status.busy":"2023-10-24T07:58:18.666882Z","iopub.status.idle":"2023-10-24T07:58:19.387747Z","shell.execute_reply":"2023-10-24T07:58:19.387197Z"},"papermill":{"duration":0.758762,"end_time":"2023-10-24T07:58:19.397971","exception":false,"start_time":"2023-10-24T07:58:18.639209","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"image = true_color_imgs[0]\nprint(f'Image type: {image.dtype}')\n\n# plot function\n# factor 1/255 to scale between 0-1\n# factor 3.5 to increase brightness\nplot_image(image, factor=3.5/255, clip_range=(0,1))","visibility":"show","key":"Jg15K9byDw"},{"type":"output","id":"dHeEO_exntP8i2ST8y_md","data":[{"name":"stdout","output_type":"stream","text":"Image type: uint8\n"},{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"a6ee3c4a1a25ec6db2dc04a521204869","path":"/example-viewer/build/a6ee3c4a1a25ec6db2dc04a521204869.png"},"text/plain":{"content":"<Figure size 1500x1500 with 1 Axes>","content_type":"text/plain"}}}],"visibility":"show","key":"wC4qiVGtZt"}],"visibility":"show","key":"VEwaRhizQV"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.08628,"end_time":"2023-10-24T07:58:19.584640","exception":false,"start_time":"2023-10-24T07:58:19.498360","status":"completed"},"tags":[]},"children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Example 1.1 Adding cloud mask data","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ufIZ4qb5xG"}],"identifier":"example-1-1-adding-cloud-mask-data","label":"Example 1.1 Adding cloud mask data","html_id":"example-1-1-adding-cloud-mask-data","implicit":true,"key":"E3H9dh1DoQ"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"It is also possible to obtain cloud masks when requesting Sentinel-2 data by using the cloud mask band (","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"JFB7x8LU7s"},{"type":"inlineCode","value":"CLM","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"FUc0BnMeLA"},{"type":"text","value":") or the cloud probabilities band (","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"RnECDnOlfG"},{"type":"inlineCode","value":"CLP","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"OKWWLEeMj8"},{"type":"text","value":"). More info ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"hAfLcfqVbh"},{"type":"link","url":"https://docs.sentinel-hub.com/api/latest/#/API/data_access?id=cloud-masks-and-cloud-probabilities","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"here","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"brnIeimvsw"}],"urlSource":"https://docs.sentinel-hub.com/api/latest/#/API/data_access?id=cloud-masks-and-cloud-probabilities","key":"raYud1hyA4"},{"type":"text","value":".","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"iBjYYWdNvm"}],"key":"JcfFb2dMsi"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"The factor for increasing the image brightness can already be provided in the evalscript.","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"ii37jfvTwo"}],"key":"eCEuyA96ow"}],"visibility":"show","key":"YqMcvkPpYF"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-10-24T07:58:19.768890Z","iopub.status.busy":"2023-10-24T07:58:19.768613Z","iopub.status.idle":"2023-10-24T07:58:19.772589Z","shell.execute_reply":"2023-10-24T07:58:19.772092Z"},"papermill":{"duration":0.092391,"end_time":"2023-10-24T07:58:19.773751","exception":false,"start_time":"2023-10-24T07:58:19.681360","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"evalscript_clm = \"\"\"\n//VERSION=3\nfunction setup() {\n  return {\n    input: [\"B02\", \"B03\", \"B04\", \"CLM\"],\n    output: { bands: 3 }\n  }\n}\n\nfunction evaluatePixel(sample) {\n  if (sample.CLM == 1) {\n    return [0.75 + sample.B04, sample.B03, sample.B02]\n  }\n  return [3.5*sample.B04, 3.5*sample.B03, 3.5*sample.B02];\n}\n\"\"\"\n\nrequest_true_color = SentinelHubRequest(\n    evalscript=evalscript_clm,\n    input_data=[\n        SentinelHubRequest.input_data(\n            data_collection=DataCollection.SENTINEL2_L1C,\n            time_interval=('2020-06-12', '2020-06-13'),\n        )\n    ],\n    responses=[\n        SentinelHubRequest.output_response('default', MimeType.PNG)\n    ],\n    bbox=betsiboka_bbox,\n    size=betsiboka_size,\n    config=config\n)","visibility":"show","key":"jY1kMEqbVD"},{"type":"output","id":"eLOyCCdMFDRNdC44bpqoV","data":[],"visibility":"show","key":"HdJZGRDYay"}],"visibility":"show","key":"xkYMMmwgCI"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-10-24T07:58:19.960475Z","iopub.status.busy":"2023-10-24T07:58:19.960133Z","iopub.status.idle":"2023-10-24T07:58:21.035944Z","shell.execute_reply":"2023-10-24T07:58:21.035485Z"},"papermill":{"duration":1.168935,"end_time":"2023-10-24T07:58:21.037249","exception":false,"start_time":"2023-10-24T07:58:19.868314","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"data_with_cloud_mask = request_true_color.get_data()","visibility":"show","key":"PkO0TZgiCg"},{"type":"output","id":"-F2cp8rjLlQN3PwsGbP8J","data":[],"visibility":"show","key":"m7L589sv9y"}],"visibility":"show","key":"E74gtlZB6e"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-10-24T07:58:21.221532Z","iopub.status.busy":"2023-10-24T07:58:21.221293Z","iopub.status.idle":"2023-10-24T07:58:21.948919Z","shell.execute_reply":"2023-10-24T07:58:21.948437Z"},"papermill":{"duration":0.822987,"end_time":"2023-10-24T07:58:21.956107","exception":false,"start_time":"2023-10-24T07:58:21.133120","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"plot_image(data_with_cloud_mask[0], factor=1/255)","visibility":"show","key":"h0M7iVKnWm"},{"type":"output","id":"2rjOhQ3IroQ_RecSxn4At","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"7cc2c750d55706b6c8b6428bb3b47567","path":"/example-viewer/build/7cc2c750d55706b6c8b6428bb3b47567.png"},"text/plain":{"content":"<Figure size 1500x1500 with 1 Axes>","content_type":"text/plain"}}}],"visibility":"show","key":"bDdnUWPKdL"}],"visibility":"show","key":"b6B1RrWBZY"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.112788,"end_time":"2023-10-24T07:58:22.189616","exception":false,"start_time":"2023-10-24T07:58:22.076828","status":"completed"},"tags":[]},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Example 2: Request a true color mosaic of least cloudy acquisitions","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"YCuninkZsW"}],"identifier":"example-2-request-a-true-color-mosaic-of-least-cloudy-acquisitions","label":"Example 2: Request a true color mosaic of least cloudy acquisitions","html_id":"example-2-request-a-true-color-mosaic-of-least-cloudy-acquisitions","implicit":true,"key":"Zqw7f3BudY"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"The ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"yrAfSzW6Zl"},{"type":"inlineCode","value":"SentinelHubRequest","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"H919YqaSAE"},{"type":"text","value":" automatically creates a mosaic from all available images in the given time interval. By default, the ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"hYphJOKEM0"},{"type":"inlineCode","value":"mostRecent","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"NRbkX8ezLa"},{"type":"text","value":" mosaicking order is used. More information available ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"hU0oh8OtpV"},{"type":"link","url":"https://docs.sentinel-hub.com/api/latest/#/data/Sentinel-2-L2A?id=mosaickingorder","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"here","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"eJaaWASkws"}],"urlSource":"https://docs.sentinel-hub.com/api/latest/#/data/Sentinel-2-L2A?id=mosaickingorder","key":"OaBLoerYnP"},{"type":"text","value":".","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"avDmPv6QVl"}],"key":"Hk1g73etno"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"In this example we will provide a month long interval, order the images w.r.t. the cloud coverage on the tile level (","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"xPUPvO27wi"},{"type":"inlineCode","value":"leastCC","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"Qeju3AoEtB"},{"type":"text","value":" parameter), and mosaic them in the specified order.","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"ylRifliter"}],"key":"S17yh7dwJS"}],"visibility":"show","key":"nk4tj4hXV2"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-10-24T07:58:22.432871Z","iopub.status.busy":"2023-10-24T07:58:22.432433Z","iopub.status.idle":"2023-10-24T07:58:22.436060Z","shell.execute_reply":"2023-10-24T07:58:22.435588Z"},"papermill":{"duration":0.120449,"end_time":"2023-10-24T07:58:22.437037","exception":false,"start_time":"2023-10-24T07:58:22.316588","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"request_true_color = SentinelHubRequest(\n    evalscript=evalscript_true_color,\n    input_data=[\n        SentinelHubRequest.input_data(\n            data_collection=DataCollection.SENTINEL2_L1C,\n            time_interval=('2020-06-01', '2020-06-30'),\n            mosaicking_order='leastCC'\n        )\n    ],\n    responses=[\n        SentinelHubRequest.output_response('default', MimeType.PNG)\n    ],\n    bbox=betsiboka_bbox,\n    size=betsiboka_size,\n    config=config\n)","visibility":"show","key":"uzfO1nXrpd"},{"type":"output","id":"rW9U4LgqZq0D6IZgZN52Z","data":[],"visibility":"show","key":"Wd3pN8tC5U"}],"visibility":"show","key":"TUJeeS5ezv"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-10-24T07:58:22.699732Z","iopub.status.busy":"2023-10-24T07:58:22.699318Z","iopub.status.idle":"2023-10-24T07:58:24.250156Z","shell.execute_reply":"2023-10-24T07:58:24.249669Z"},"papermill":{"duration":1.691195,"end_time":"2023-10-24T07:58:24.257346","exception":false,"start_time":"2023-10-24T07:58:22.566151","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"plot_image(request_true_color.get_data()[0], factor=3.5/255, clip_range=(0,1))","visibility":"show","key":"gf9N4ps5Ac"},{"type":"output","id":"TOwx9gcgQ0vEfVsdIQ0xC","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"9c3a0f7e7f03b678f292f3d756e7ebf4","path":"/example-viewer/build/9c3a0f7e7f03b678f292f3d756e7ebf4.png"},"text/plain":{"content":"<Figure size 1500x1500 with 1 Axes>","content_type":"text/plain"}}}],"visibility":"show","key":"UYslrmFTrF"}],"visibility":"show","key":"aqDa8KxX0N"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.158495,"end_time":"2023-10-24T07:58:24.592486","exception":false,"start_time":"2023-10-24T07:58:24.433991","status":"completed"},"tags":[]},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Example 3: Request all Sentinel-2’s raw band values","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Y4g28kujqy"}],"identifier":"example-3-request-all-sentinel-2s-raw-band-values","label":"Example 3: Request all Sentinel-2’s raw band values","html_id":"example-3-request-all-sentinel-2s-raw-band-values","implicit":true,"key":"mMakx6gelj"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Now let’s define an evalscript which will return all Sentinel-2 spectral bands with raw values.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"xSLBOPjdYf"}],"key":"X2eONPBcFR"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"In this example we are downloading already quite a big chunk of data, so optimization of the request is not out of the question. Downloading raw digital numbers in the ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"rgPjagZzcS"},{"type":"inlineCode","value":"INT16","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"OumAVJYUuI"},{"type":"text","value":" format instead of reflectances in the ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"KaG1DMYfbi"},{"type":"inlineCode","value":"FLOAT32","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"NHWH19oyyd"},{"type":"text","value":" format means that much less data is downloaded, which results in a faster download and a smaller usage of SH processing units.","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"gqBl19Eaay"}],"key":"XZOvMUtWtQ"},{"type":"paragraph","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"In order to achieve this, we have to set the input units in the evalscript to ","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"YVbvJoDIKM"},{"type":"inlineCode","value":"DN","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"M699h8kkxu"},{"type":"text","value":" (digital numbers) and the output ","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"FCXGwRn20e"},{"type":"inlineCode","value":"sampleType","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"wFRSZiHYuA"},{"type":"text","value":" argument to ","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"O2bhYPozzk"},{"type":"inlineCode","value":"INT16","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"PycZ0y0gST"},{"type":"text","value":". Additionally, we can’t pack all Sentinel-2’s 13 bands into a ","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"pnySc1QknX"},{"type":"inlineCode","value":"PNG","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"tVmF5JHbeQ"},{"type":"text","value":" image, so we have to set the output image type to the ","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"y337XKCpsY"},{"type":"inlineCode","value":"TIFF","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"Q1Fm2Hie0b"},{"type":"text","value":" format via ","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"TvpWVzGYLN"},{"type":"inlineCode","value":"MimeType.TIFF","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"n7SEVZc4bA"},{"type":"text","value":" in the request.","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"y2A98AaZU6"}],"key":"OGBjZvakhu"},{"type":"paragraph","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"The digital numbers are in the range from 0-10000, so we have to scale the downloaded data appropriately.","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"qRcuMAAORU"}],"key":"s5H7eyxS2F"}],"visibility":"show","key":"XK8cwnj6ag"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-10-24T07:58:24.930585Z","iopub.status.busy":"2023-10-24T07:58:24.930109Z","iopub.status.idle":"2023-10-24T07:58:24.934135Z","shell.execute_reply":"2023-10-24T07:58:24.933703Z"},"papermill":{"duration":0.177238,"end_time":"2023-10-24T07:58:24.935088","exception":false,"start_time":"2023-10-24T07:58:24.757850","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"evalscript_all_bands = \"\"\"\n    //VERSION=3\n    function setup() {\n        return {\n            input: [{\n                bands: [\"B01\",\"B02\",\"B03\",\"B04\",\"B05\",\"B06\",\"B07\",\"B08\",\"B8A\",\"B09\",\"B10\",\"B11\",\"B12\"],\n                units: \"DN\"\n            }],\n            output: {\n                bands: 13,\n                sampleType: \"INT16\"\n            }\n        };\n    }\n\n    function evaluatePixel(sample) {\n        return [sample.B01,\n                sample.B02,\n                sample.B03,\n                sample.B04,\n                sample.B05,\n                sample.B06,\n                sample.B07,\n                sample.B08,\n                sample.B8A,\n                sample.B09,\n                sample.B10,\n                sample.B11,\n                sample.B12];\n    }\n\"\"\"\n\nrequest_all_bands = SentinelHubRequest(\n    evalscript=evalscript_all_bands,\n    input_data=[\n        SentinelHubRequest.input_data(\n            data_collection=DataCollection.SENTINEL2_L1C,\n            time_interval=('2020-06-01', '2020-06-30'),\n            mosaicking_order='leastCC'\n    )],\n    responses=[\n        SentinelHubRequest.output_response('default', MimeType.TIFF)\n    ],\n    bbox=betsiboka_bbox,\n    size=betsiboka_size,\n    config=config\n)","visibility":"show","key":"XDIINRoFgj"},{"type":"output","id":"nmTj9WECAwOdQtjOVc9Y3","data":[],"visibility":"show","key":"jEOWiBZimC"}],"visibility":"show","key":"uCU8cTASTj"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-10-24T07:58:25.246449Z","iopub.status.busy":"2023-10-24T07:58:25.246139Z","iopub.status.idle":"2023-10-24T07:58:29.591562Z","shell.execute_reply":"2023-10-24T07:58:29.591058Z"},"papermill":{"duration":4.501737,"end_time":"2023-10-24T07:58:29.593006","exception":false,"start_time":"2023-10-24T07:58:25.091269","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"all_bands_response = request_all_bands.get_data()","visibility":"show","key":"hUpgFdxwSm"},{"type":"output","id":"KQ4ms2nmmFItdgiKzc-kZ","data":[],"visibility":"show","key":"XLG81XnbTj"}],"visibility":"show","key":"JHxQIzAQwO"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-10-24T07:58:29.963501Z","iopub.status.busy":"2023-10-24T07:58:29.963043Z","iopub.status.idle":"2023-10-24T07:58:30.427331Z","shell.execute_reply":"2023-10-24T07:58:30.426858Z"},"papermill":{"duration":0.630095,"end_time":"2023-10-24T07:58:30.434315","exception":false,"start_time":"2023-10-24T07:58:29.804220","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# Image showing the SWIR band B12\n# Factor 1/1e4 due to the DN band values in the range 0-10000\n# Factor 3.5 to increase the brightness\nplot_image(all_bands_response[0][:, :, 12], factor=3.5/1e4, vmax=1)","visibility":"show","key":"U5bzwzOVX1"},{"type":"output","id":"_ASOMkTbO7pgcNAHSn1Xm","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"69b20c649f17fdf2cf95a7dc0fccbce8","path":"/example-viewer/build/69b20c649f17fdf2cf95a7dc0fccbce8.png"},"text/plain":{"content":"<Figure size 1500x1500 with 1 Axes>","content_type":"text/plain"}}}],"visibility":"show","key":"DYDaHxeaEQ"}],"visibility":"show","key":"Um2VQ728wK"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-10-24T07:58:30.862665Z","iopub.status.busy":"2023-10-24T07:58:30.862154Z","iopub.status.idle":"2023-10-24T07:58:31.482062Z","shell.execute_reply":"2023-10-24T07:58:31.481547Z"},"papermill":{"duration":0.839145,"end_time":"2023-10-24T07:58:31.491142","exception":false,"start_time":"2023-10-24T07:58:30.651997","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# From raw bands we can also construct a False-Color image\n# False color image is (B03, B04, B08)\nplot_image(all_bands_response[0][:, :, [2,3,7]], factor=3.5/1e4, clip_range=(0,1))","visibility":"show","key":"VTctAAnmJv"},{"type":"output","id":"bqe80gwHbZa_mD2CuQfHu","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"331dd2d9e3f90301403aa18125282a6d","path":"/example-viewer/build/331dd2d9e3f90301403aa18125282a6d.png"},"text/plain":{"content":"<Figure size 1500x1500 with 1 Axes>","content_type":"text/plain"}}}],"visibility":"show","key":"CcT8mwGysJ"}],"visibility":"show","key":"pJ15knmiIY"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.20739,"end_time":"2023-10-24T07:58:31.947717","exception":false,"start_time":"2023-10-24T07:58:31.740327","status":"completed"},"tags":[]},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Example 4: Save downloaded data to disk and read it from disk","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ojAP1FkMbn"}],"identifier":"example-4-save-downloaded-data-to-disk-and-read-it-from-disk","label":"Example 4: Save downloaded data to disk and read it from disk","html_id":"example-4-save-downloaded-data-to-disk-and-read-it-from-disk","implicit":true,"key":"RSTAwYIsZx"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"All downloaded data can be saved to disk and later read from it. Simply specify the location on disk where data should be saved (or loaded from) via the ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"fPl9kgiQ9E"},{"type":"inlineCode","value":"data_folder","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"JQp3TLvfNT"},{"type":"text","value":" argument of the request’s constructor. When executing the request’s ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"eowRht5m7C"},{"type":"inlineCode","value":"get_data","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"ZQaukjKd0p"},{"type":"text","value":" method, set the argument ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"TeuMBCr512"},{"type":"inlineCode","value":"save_data","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"zYAwd05C9l"},{"type":"text","value":" to ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"OYzVAs8ksx"},{"type":"inlineCode","value":"True","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Qj9brmL9UW"},{"type":"text","value":".","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"wROn6W4tge"}],"key":"QisvkmHeEP"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"This also means that in all the future requests for data, the request will first check the provided location if the data is already there, unless you explicitly demand to redownload the data.","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"OdZUShI0xe"}],"key":"FpZiEId6Ss"}],"visibility":"show","key":"srP97bcosf"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-10-24T07:58:32.386579Z","iopub.status.busy":"2023-10-24T07:58:32.386242Z","iopub.status.idle":"2023-10-24T07:58:32.389771Z","shell.execute_reply":"2023-10-24T07:58:32.389307Z"},"papermill":{"duration":0.211012,"end_time":"2023-10-24T07:58:32.390802","exception":false,"start_time":"2023-10-24T07:58:32.179790","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"request_all_bands = SentinelHubRequest(\n    data_folder='test_dir',\n    evalscript=evalscript_all_bands,\n    input_data=[\n        SentinelHubRequest.input_data(\n            data_collection=DataCollection.SENTINEL2_L1C,\n            time_interval=('2020-06-01', '2020-06-30'),\n            mosaicking_order='leastCC'\n    )],\n    responses=[\n        SentinelHubRequest.output_response('default', MimeType.TIFF)\n    ],\n    bbox=betsiboka_bbox,\n    size=betsiboka_size,\n    config=config\n)","visibility":"show","key":"qZIBuoTbwl"},{"type":"output","id":"Up1hzMAs6RRqkljJM5uPx","data":[],"visibility":"show","key":"KpmGoMYdvw"}],"visibility":"show","key":"TKgG4M816O"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-10-24T07:58:32.881602Z","iopub.status.busy":"2023-10-24T07:58:32.881346Z","iopub.status.idle":"2023-10-24T07:58:36.883113Z","shell.execute_reply":"2023-10-24T07:58:36.882692Z"},"papermill":{"duration":4.26001,"end_time":"2023-10-24T07:58:36.884678","exception":false,"start_time":"2023-10-24T07:58:32.624668","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"%%time\nall_bands_img = request_all_bands.get_data(save_data=True)","visibility":"show","key":"lHQSKDzty0"},{"type":"output","id":"uwo3ocrG6ogQki0EeCu5n","data":[{"name":"stdout","output_type":"stream","text":"CPU times: user 141 ms, sys: 26 ms, total: 167 ms\nWall time: 4 s\n"}],"visibility":"show","key":"Pde1yGQ5KX"}],"visibility":"show","key":"fFMfuvfdPY"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-10-24T07:58:37.363448Z","iopub.status.busy":"2023-10-24T07:58:37.363170Z","iopub.status.idle":"2023-10-24T07:58:37.372692Z","shell.execute_reply":"2023-10-24T07:58:37.372183Z"},"papermill":{"duration":0.226648,"end_time":"2023-10-24T07:58:37.373812","exception":false,"start_time":"2023-10-24T07:58:37.147164","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"print(f'The output directory has been created and a tiff file with all 13 bands was saved into ' \\\n      'the following structure:\\n')\n\nfor folder, _, filenames in os.walk(request_all_bands.data_folder):\n    for filename in filenames:\n        print(os.path.join(folder, filename))","visibility":"show","key":"rtNvj13kyy"},{"type":"output","id":"akpQ5jlwbNttwOY7tuWhR","data":[{"name":"stdout","output_type":"stream","text":"The output directory has been created and a tiff file with all 13 bands was saved into the following structure:\n\ntest_dir/4d34ca44cf5505abbf2690c928df83fe/response.tiff\ntest_dir/4d34ca44cf5505abbf2690c928df83fe/request.json\n"}],"visibility":"show","key":"r6IXckoyQL"}],"visibility":"show","key":"Bf23QxpzKF"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-10-24T07:58:37.828388Z","iopub.status.busy":"2023-10-24T07:58:37.828122Z","iopub.status.idle":"2023-10-24T07:58:37.986498Z","shell.execute_reply":"2023-10-24T07:58:37.985920Z"},"papermill":{"duration":0.38535,"end_time":"2023-10-24T07:58:37.987513","exception":false,"start_time":"2023-10-24T07:58:37.602163","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"%%time\n# try to re-download the data\nall_bands_img_from_disk = request_all_bands.get_data()","visibility":"show","key":"BCasLowqWL"},{"type":"output","id":"Bd4aZAgDZV0jBuZISRKoB","data":[{"name":"stdout","output_type":"stream","text":"CPU times: user 110 ms, sys: 15.3 ms, total: 125 ms\nWall time: 155 ms\n"}],"visibility":"show","key":"Pxy3oelcA7"}],"visibility":"show","key":"ATkn4qIivX"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-10-24T07:58:38.456540Z","iopub.status.busy":"2023-10-24T07:58:38.456117Z","iopub.status.idle":"2023-10-24T07:58:43.895246Z","shell.execute_reply":"2023-10-24T07:58:43.894700Z"},"papermill":{"duration":5.672089,"end_time":"2023-10-24T07:58:43.896353","exception":false,"start_time":"2023-10-24T07:58:38.224264","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"%%time\n# force the redownload\nall_bands_img_redownload = request_all_bands.get_data(redownload=True)","visibility":"show","key":"LTTZXfvTX6"},{"type":"output","id":"GxosZyNqFLbzdiB12fmrY","data":[{"name":"stdout","output_type":"stream","text":"CPU times: user 153 ms, sys: 11.1 ms, total: 164 ms\nWall time: 5.44 s\n"}],"visibility":"show","key":"Z7bqVR2Uqi"}],"visibility":"show","key":"ibCYdqId3B"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.241312,"end_time":"2023-10-24T07:58:44.417988","exception":false,"start_time":"2023-10-24T07:58:44.176676","status":"completed"},"tags":[]},"children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Example 4.1: Save downloaded data directly to disk","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"omOc2jsqPF"}],"identifier":"example-4-1-save-downloaded-data-directly-to-disk","label":"Example 4.1: Save downloaded data directly to disk","html_id":"example-4-1-save-downloaded-data-directly-to-disk","implicit":true,"key":"JgkJOVw8nP"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"The ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"ByqiATOPyf"},{"type":"inlineCode","value":"get_data","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"quPzSH03ba"},{"type":"text","value":" method returns a list of numpy arrays and can save the downloaded data to disk, as we have seen in the previous example. Sometimes it is convenient to just save the data directly to disk. You can do that by using ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"CNxQJV9rnR"},{"type":"inlineCode","value":"save_data","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"mRILm4biY5"},{"type":"text","value":" method instead.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"qixRlW5wDE"}],"key":"Am3J9AvFKp"}],"visibility":"show","key":"utmnHZzIgR"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-10-24T07:58:44.890483Z","iopub.status.busy":"2023-10-24T07:58:44.890067Z","iopub.status.idle":"2023-10-24T07:58:44.894451Z","shell.execute_reply":"2023-10-24T07:58:44.893926Z"},"papermill":{"duration":0.216491,"end_time":"2023-10-24T07:58:44.895703","exception":false,"start_time":"2023-10-24T07:58:44.679212","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"%%time\nrequest_all_bands.save_data()","visibility":"show","key":"Tn2MThDZR6"},{"type":"output","id":"blilUqdcQj8eV2jC2G2Lu","data":[{"name":"stdout","output_type":"stream","text":"CPU times: user 1.39 ms, sys: 0 ns, total: 1.39 ms\nWall time: 1.35 ms\n"}],"visibility":"show","key":"PFnERJE6kK"}],"visibility":"show","key":"dd01DZTIpv"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-10-24T07:58:45.386767Z","iopub.status.busy":"2023-10-24T07:58:45.386500Z","iopub.status.idle":"2023-10-24T07:58:45.400043Z","shell.execute_reply":"2023-10-24T07:58:45.399372Z"},"papermill":{"duration":0.251393,"end_time":"2023-10-24T07:58:45.401218","exception":false,"start_time":"2023-10-24T07:58:45.149825","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"print(f'The output directory has been created and a tiff file with all 13 bands was saved into ' \\\n      'the following structure:\\n')\n\nfor folder, _, filenames in os.walk(request_all_bands.data_folder):\n    for filename in filenames:\n        print(os.path.join(folder, filename))","visibility":"show","key":"K3YfUEqGzJ"},{"type":"output","id":"y3m6yKntgkk4wO6qXLlZs","data":[{"name":"stdout","output_type":"stream","text":"The output directory has been created and a tiff file with all 13 bands was saved into the following structure:\n\ntest_dir/4d34ca44cf5505abbf2690c928df83fe/response.tiff\ntest_dir/4d34ca44cf5505abbf2690c928df83fe/request.json\n"}],"visibility":"show","key":"dbFj9GWiyx"}],"visibility":"show","key":"yKrrZrNeOd"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.234628,"end_time":"2023-10-24T07:58:45.871433","exception":false,"start_time":"2023-10-24T07:58:45.636805","status":"completed"},"tags":[]},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Example 5: Request other data collections supported by ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ctMDRjldud"},{"type":"inlineCode","value":"sh-py","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"E4kY3s8aRr"}],"identifier":"example-5-request-other-data-collections-supported-by-sh-py","label":"Example 5: Request other data collections supported by sh-py","html_id":"example-5-request-other-data-collections-supported-by-sh-py","implicit":true,"key":"UTM3ae8gfL"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"The ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"iZy3UY3NlU"},{"type":"inlineCode","value":"sentinelhub-py","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"JUO2x53KzU"},{"type":"text","value":" package supports various data collections. The example below is shown for one of them, but the process is the same for all of them.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"uLvUGENqKq"}],"key":"vqQdHEvaKX"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"strong","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Note: For more examples and information check the ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"QVJ6RgMvnV"},{"type":"link","url":"https://sentinelhub-py.readthedocs.io/en/latest/examples/data_collections.html","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"tutorial about data collections","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"kKELaqMwRb"}],"urlSource":"https://sentinelhub-py.readthedocs.io/en/latest/examples/data_collections.html","key":"vRZrbpA06o"},{"type":"text","value":" and ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"iqbprBKT3M"},{"type":"link","url":"https://docs.sentinel-hub.com/api/latest/#/data/","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Sentinel Hub documentation about data collections","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"hja28ofKVS"}],"urlSource":"https://docs.sentinel-hub.com/api/latest/#/data/","key":"okhO7ToOm8"},{"type":"text","value":".","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"QYAc227cpE"}],"key":"X8jWOAyxm3"}],"key":"DO1xcomqI3"}],"visibility":"show","key":"veh53ZElc1"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-10-24T07:58:46.356779Z","iopub.status.busy":"2023-10-24T07:58:46.356191Z","iopub.status.idle":"2023-10-24T07:58:46.360157Z","shell.execute_reply":"2023-10-24T07:58:46.359619Z"},"papermill":{"duration":0.235303,"end_time":"2023-10-24T07:58:46.361427","exception":false,"start_time":"2023-10-24T07:58:46.126124","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"print('Supported DataCollections:\\n')\nfor collection in DataCollection.get_available_collections():\n    print(collection)","visibility":"show","key":"DQsWuiP253"},{"type":"output","id":"8w2gT1kFYuyKdB7KNttb4","data":[{"name":"stdout","output_type":"stream","text":"Supported DataCollections:\n\nDataCollection.SENTINEL2_L1C\nDataCollection.SENTINEL2_L2A\nDataCollection.SENTINEL1\nDataCollection.SENTINEL1_IW\nDataCollection.SENTINEL1_IW_ASC\nDataCollection.SENTINEL1_IW_DES\nDataCollection.SENTINEL1_EW\nDataCollection.SENTINEL1_EW_ASC\nDataCollection.SENTINEL1_EW_DES\nDataCollection.SENTINEL1_EW_SH\nDataCollection.SENTINEL1_EW_SH_ASC\nDataCollection.SENTINEL1_EW_SH_DES\nDataCollection.DEM\nDataCollection.DEM_MAPZEN\nDataCollection.DEM_COPERNICUS_30\nDataCollection.DEM_COPERNICUS_90\nDataCollection.MODIS\nDataCollection.LANDSAT_MSS_L1\nDataCollection.LANDSAT_TM_L1\nDataCollection.LANDSAT_TM_L2\nDataCollection.LANDSAT_ETM_L1\nDataCollection.LANDSAT_ETM_L2\nDataCollection.LANDSAT_OT_L1\nDataCollection.LANDSAT_OT_L2\nDataCollection.SENTINEL5P\nDataCollection.SENTINEL3_OLCI\nDataCollection.SENTINEL3_SLSTR\nDataCollection.HARMONIZED_LANDSAT_SENTINEL\n"}],"visibility":"show","key":"YO5qhDmVoz"}],"visibility":"show","key":"rybWYzsSFT"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.240947,"end_time":"2023-10-24T07:58:46.861365","exception":false,"start_time":"2023-10-24T07:58:46.620418","status":"completed"},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"For this example let’s download the digital elevation model data (DEM). The process is similar as before, we just provide the evalscript and create the request. More data on the ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"iaPg2gh7O5"},{"type":"inlineCode","value":"DEM","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"LZWPEgYlab"},{"type":"text","value":" data collection is available ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"QgVHQNiS1H"},{"type":"link","url":"https://docs.sentinel-hub.com/api/latest/#/data/DEM","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"here","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"w4RoAhnAZl"}],"urlSource":"https://docs.sentinel-hub.com/api/latest/#/data/DEM","key":"itaeq6j4zA"},{"type":"text","value":". ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"C0EqAQ3f4N"},{"type":"inlineCode","value":"DEM","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"XO9m25M41Q"},{"type":"text","value":" values are in meters and can be negative for areas which lie below sea level, so it is recommended to set the output format in your evalscript to ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"z4iprPV4jF"},{"type":"inlineCode","value":"FLOAT32","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"INwIk0CPfS"},{"type":"text","value":".","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"xx4K21sYuI"}],"key":"cfTaaTtE4N"}],"visibility":"show","key":"dx6Ht2zyiM"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-10-24T07:58:47.339683Z","iopub.status.busy":"2023-10-24T07:58:47.339183Z","iopub.status.idle":"2023-10-24T07:58:47.342272Z","shell.execute_reply":"2023-10-24T07:58:47.341758Z"},"papermill":{"duration":0.236946,"end_time":"2023-10-24T07:58:47.343339","exception":false,"start_time":"2023-10-24T07:58:47.106393","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"evalscript_dem = '''\n//VERSION=3\nfunction setup() {\n  return {\n    input: [\"DEM\"],\n    output:{\n      id: \"default\",\n      bands: 1,\n      sampleType: SampleType.FLOAT32\n    }\n  }\n}\n\nfunction evaluatePixel(sample) {\n  return [sample.DEM]\n}\n'''","visibility":"show","key":"MX9DamVWW6"},{"type":"output","id":"1NxsSwxWjUUxt_QK5KcZS","data":[],"visibility":"show","key":"UXxz6W4aMr"}],"visibility":"show","key":"oPV04grGDa"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-10-24T07:58:47.827899Z","iopub.status.busy":"2023-10-24T07:58:47.827316Z","iopub.status.idle":"2023-10-24T07:58:47.831465Z","shell.execute_reply":"2023-10-24T07:58:47.831005Z"},"papermill":{"duration":0.240012,"end_time":"2023-10-24T07:58:47.832621","exception":false,"start_time":"2023-10-24T07:58:47.592609","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"dem_request = SentinelHubRequest(\n    evalscript=evalscript_dem,\n    input_data=[\n        SentinelHubRequest.input_data(\n            data_collection=DataCollection.DEM,\n            time_interval=('2020-06-12', '2020-06-13'),\n    )\n    ],\n    responses=[\n        SentinelHubRequest.output_response('default', MimeType.TIFF)\n    ],\n    bbox=betsiboka_bbox,\n    size=betsiboka_size,\n    config=config\n)","visibility":"show","key":"reUmuqafR4"},{"type":"output","id":"d5qgaWxzj2O9l4DvSXQcc","data":[],"visibility":"show","key":"lLDdIVMdUi"}],"visibility":"show","key":"fAcXw2xrIn"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-10-24T07:58:48.301435Z","iopub.status.busy":"2023-10-24T07:58:48.300968Z","iopub.status.idle":"2023-10-24T07:58:49.524209Z","shell.execute_reply":"2023-10-24T07:58:49.523751Z"},"papermill":{"duration":1.451687,"end_time":"2023-10-24T07:58:49.526186","exception":false,"start_time":"2023-10-24T07:58:48.074499","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"dem_data = dem_request.get_data()","visibility":"show","key":"kKvW31mfff"},{"type":"output","id":"eOOmIfzbd96MWtqHHIErC","data":[],"visibility":"show","key":"KIGudMROMD"}],"visibility":"show","key":"tOWNVeubCr"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-10-24T07:58:49.991133Z","iopub.status.busy":"2023-10-24T07:58:49.990720Z","iopub.status.idle":"2023-10-24T07:58:50.317452Z","shell.execute_reply":"2023-10-24T07:58:50.317037Z"},"papermill":{"duration":0.548964,"end_time":"2023-10-24T07:58:50.320298","exception":false,"start_time":"2023-10-24T07:58:49.771334","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# Plot DEM map\n# vmin = 0; cutoff at sea level (0 m)\n# vmax = 120; cutoff at high values (120 m)\nplot_image(dem_data[0], factor=1.0, cmap=plt.cm.Greys_r, vmin=0, vmax=120)","visibility":"show","key":"jFJIMVBcHO"},{"type":"output","id":"rlH-onrKQVzGd0BEAVm16","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"2a682b1635f3c4a62e35abf11409f279","path":"/example-viewer/build/2a682b1635f3c4a62e35abf11409f279.png"},"text/plain":{"content":"<Figure size 1500x1500 with 1 Axes>","content_type":"text/plain"}}}],"visibility":"show","key":"N9Q4ZxvObH"}],"visibility":"show","key":"eHzeMaRP6P"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.238989,"end_time":"2023-10-24T07:58:50.817639","exception":false,"start_time":"2023-10-24T07:58:50.578650","status":"completed"},"tags":[]},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Example 6: Multi-response request","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"dMOOgfEbQt"}],"identifier":"example-6-multi-response-request","label":"Example 6: Multi-response request","html_id":"example-6-multi-response-request","implicit":true,"key":"yiERNC8VjT"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Process API enables downloading multiple files in one response, packed together in a TAR archive.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"y5roEvq5av"}],"key":"RfJt6yxZSS"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"We will get the same image as before, download in the form of digital numbers (DN) as a UINT16 TIFF file. Along with the image we will download the ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"zvXAUrvVh6"},{"type":"inlineCode","value":"inputMetadata","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"M0AKqNnMJ1"},{"type":"text","value":" which contains the normalization factor value in a JSON format.","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"aQlREth7S5"}],"key":"jDAHT0E133"},{"type":"paragraph","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"After the download we will be able to convert the ","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"S18Zn0Vcg3"},{"type":"inlineCode","value":"INT16","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"GmaPb2OYjm"},{"type":"text","value":" digital numbers to get the ","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"vR6XsNqizK"},{"type":"inlineCode","value":"FLOAT32","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"OqQbmF6ZKs"},{"type":"text","value":" reflectances.","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"E9wubHZv8Z"}],"key":"PtoKA3U93n"}],"visibility":"show","key":"nQUbLFFp7d"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-10-24T07:58:51.307893Z","iopub.status.busy":"2023-10-24T07:58:51.307468Z","iopub.status.idle":"2023-10-24T07:58:51.311224Z","shell.execute_reply":"2023-10-24T07:58:51.310809Z"},"papermill":{"duration":0.243238,"end_time":"2023-10-24T07:58:51.312640","exception":false,"start_time":"2023-10-24T07:58:51.069402","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"evalscript = \"\"\"\n    //VERSION=3\n\n    function setup() {\n        return {\n            input: [{\n                bands: [\"B02\", \"B03\", \"B04\"],\n                units: \"DN\"\n            }],\n            output: {\n                bands: 3,\n                sampleType: \"INT16\"\n            }\n        };\n    }\n\n    function updateOutputMetadata(scenes, inputMetadata, outputMetadata) {\n        outputMetadata.userData = { \"norm_factor\":  inputMetadata.normalizationFactor }\n    }\n\n    function evaluatePixel(sample) {\n        return [sample.B04, sample.B03, sample.B02];\n    }\n\"\"\"\n\nrequest_multitype = SentinelHubRequest(\n    evalscript=evalscript,\n    input_data=[\n        SentinelHubRequest.input_data(\n            data_collection=DataCollection.SENTINEL2_L1C,\n            time_interval=('2020-06-01', '2020-06-30'),\n            mosaicking_order='leastCC'\n        )\n    ],\n    responses=[\n        SentinelHubRequest.output_response('default', MimeType.TIFF),\n        SentinelHubRequest.output_response('userdata', MimeType.JSON)\n    ],\n    bbox=betsiboka_bbox,\n    size=betsiboka_size,\n    config=config\n)","visibility":"show","key":"jdBWm0SeNB"},{"type":"output","id":"PEAod3yYQq-pg0ZTry241","data":[],"visibility":"show","key":"z3RN1bWEfo"}],"visibility":"show","key":"VJ68O6En0s"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-10-24T07:58:51.811918Z","iopub.status.busy":"2023-10-24T07:58:51.811393Z","iopub.status.idle":"2023-10-24T07:58:53.044049Z","shell.execute_reply":"2023-10-24T07:58:53.043553Z"},"papermill":{"duration":1.47041,"end_time":"2023-10-24T07:58:53.045218","exception":false,"start_time":"2023-10-24T07:58:51.574808","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# print out information\nmulti_data = request_multitype.get_data()[0]\nmulti_data.keys()","visibility":"show","key":"aOib5nGPxP"},{"type":"output","id":"WJkqY0IsQk_cIxQFK1ico","data":[{"output_type":"execute_result","execution_count":34,"metadata":{},"data":{"text/plain":{"content":"dict_keys(['default.tif', 'userdata.json'])","content_type":"text/plain"}}}],"visibility":"show","key":"ofGkRlklsy"}],"visibility":"show","key":"qQHSjB8A7i"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-10-24T07:58:53.571721Z","iopub.status.busy":"2023-10-24T07:58:53.571270Z","iopub.status.idle":"2023-10-24T07:58:53.575388Z","shell.execute_reply":"2023-10-24T07:58:53.574964Z"},"papermill":{"duration":0.28882,"end_time":"2023-10-24T07:58:53.576868","exception":false,"start_time":"2023-10-24T07:58:53.288048","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# normalize image\nimg = multi_data['default.tif']\nnorm_factor = multi_data['userdata.json']['norm_factor']\n\nimg_float32 = img * norm_factor","visibility":"show","key":"ex42zq0iZZ"},{"type":"output","id":"bR32JkXQ1FBzJVzZB-_Dk","data":[],"visibility":"show","key":"ZXcTb1nFx8"}],"visibility":"show","key":"s1j9UrurGd"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-10-24T07:58:54.066725Z","iopub.status.busy":"2023-10-24T07:58:54.066112Z","iopub.status.idle":"2023-10-24T07:58:54.746026Z","shell.execute_reply":"2023-10-24T07:58:54.745572Z"},"papermill":{"duration":0.919051,"end_time":"2023-10-24T07:58:54.755429","exception":false,"start_time":"2023-10-24T07:58:53.836378","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"plot_image(img_float32, factor=3.5, clip_range=(0, 1))","visibility":"show","key":"Fv74iGvLRN"},{"type":"output","id":"5pXqLw3PLoWM7bVMWZF1o","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"3507c6173d8238b3fd0018b749a79dd9","path":"/example-viewer/build/3507c6173d8238b3fd0018b749a79dd9.png"},"text/plain":{"content":"<Figure size 1500x1500 with 1 Axes>","content_type":"text/plain"}}}],"visibility":"show","key":"vsrpfMOKfe"}],"visibility":"show","key":"hhUfXRl3gI"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.26274,"end_time":"2023-10-24T07:58:55.310679","exception":false,"start_time":"2023-10-24T07:58:55.047939","status":"completed"},"tags":[]},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Example 7: Request with a raw dictionary","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ZOgRMOcLsn"}],"identifier":"example-7-request-with-a-raw-dictionary","label":"Example 7: Request with a raw dictionary","html_id":"example-7-request-with-a-raw-dictionary","implicit":true,"key":"xvIICi3VEu"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"All requests so far were built with some helper functions. We can also construct a raw dictionary as defined in the ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Bot6mm8FqT"},{"type":"link","url":"https://docs.sentinel-hub.com/api/latest/reference/","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"API Reference","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"KZVUDf6wEt"}],"urlSource":"https://docs.sentinel-hub.com/api/latest/reference/","key":"yQnnAYLqBm"},{"type":"text","value":", without these helper functions, so we have full control over building the request body.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"jTIN7pFPAe"}],"key":"lVrZgZrqXc"}],"visibility":"show","key":"TbDPXtNqxf"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-10-24T07:58:55.895161Z","iopub.status.busy":"2023-10-24T07:58:55.894814Z","iopub.status.idle":"2023-10-24T07:58:55.898654Z","shell.execute_reply":"2023-10-24T07:58:55.898230Z"},"papermill":{"duration":0.28599,"end_time":"2023-10-24T07:58:55.899609","exception":false,"start_time":"2023-10-24T07:58:55.613619","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"request_raw_dict = {\n    \"input\": {\n        \"bounds\": {\n            \"properties\": {\n                \"crs\": betsiboka_bbox.crs.opengis_string\n            },\n            \"bbox\": list(betsiboka_bbox)\n        },\n        \"data\": [\n            {\n                \"type\": \"S2L1C\",\n                \"dataFilter\": {\n                    \"timeRange\": {\"from\": '2020-06-01T00:00:00Z', \"to\": '2020-06-30T00:00:00Z'},\n                    \"mosaickingOrder\": \"leastCC\",\n                }\n            }\n        ]\n    },\n    \"output\": {\n        \"width\": betsiboka_size[0],\n        \"height\": betsiboka_size[1],\n        \"responses\": [\n            {\n                \"identifier\": \"default\",\n                \"format\": {\n                    'type': MimeType.TIFF.get_string()\n                }\n            }\n        ]\n    },\n    \"evalscript\": evalscript_true_color\n}","visibility":"show","key":"gzMz8XztCr"},{"type":"output","id":"wbD5jUuxz7KhAxmtP9Xfy","data":[],"visibility":"show","key":"I2Vu7SjPLW"}],"visibility":"show","key":"HrLOxUhPkQ"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-10-24T07:58:56.424445Z","iopub.status.busy":"2023-10-24T07:58:56.423884Z","iopub.status.idle":"2023-10-24T07:58:57.276025Z","shell.execute_reply":"2023-10-24T07:58:57.275591Z"},"papermill":{"duration":1.104523,"end_time":"2023-10-24T07:58:57.277474","exception":false,"start_time":"2023-10-24T07:58:56.172951","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# create request\ndownload_request = DownloadRequest(\n    request_type='POST',\n    url=\"https://services.sentinel-hub.com/api/v1/process\",\n    post_values=request_raw_dict,\n    data_type=MimeType.TIFF,\n    headers={'content-type': 'application/json'},\n    use_session=True\n)\n\n# execute request\nclient = SentinelHubDownloadClient(config=config)\nimg = client.download(download_request)","visibility":"show","key":"ml6BJXKDIl"},{"type":"output","id":"tNLq4dFgROtSXp3dc6Vep","data":[{"name":"stderr","output_type":"stream","text":"/home/conda/20a41cef-8d63-4030-9e37-aa3412866cee/60a7fe77bf15cdba38ca795208c44847e274649eaaa525aeefa5bf7a3f7692e0-20231023-081922-894744-312-bm-test-edc-2023.10-01/lib/python3.11/site-packages/sentinelhub/download/client.py:78: SHDeprecationWarning: The parameter `download_requests` should be a sequence of requests. In future versions download of single requests will only be supported if provided as a singelton tuple or list.\n  warnings.warn(\n"}],"visibility":"show","key":"FlER40AR23"}],"visibility":"show","key":"hObKoEmsqT"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-10-24T07:58:57.810223Z","iopub.status.busy":"2023-10-24T07:58:57.809843Z","iopub.status.idle":"2023-10-24T07:58:58.466505Z","shell.execute_reply":"2023-10-24T07:58:58.466084Z"},"papermill":{"duration":0.912216,"end_time":"2023-10-24T07:58:58.473503","exception":false,"start_time":"2023-10-24T07:58:57.561287","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"plot_image(img, factor=3.5/255, clip_range=(0,1))","visibility":"show","key":"SflCitgi80"},{"type":"output","id":"oaaaP-hHQVkOadXmBMQIq","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"9c3a0f7e7f03b678f292f3d756e7ebf4","path":"/example-viewer/build/9c3a0f7e7f03b678f292f3d756e7ebf4.png"},"text/plain":{"content":"<Figure size 1500x1500 with 1 Axes>","content_type":"text/plain"}}}],"visibility":"show","key":"PrqZa0EQEC"}],"visibility":"show","key":"y8jJrrttfL"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.281786,"end_time":"2023-10-24T07:58:59.064993","exception":false,"start_time":"2023-10-24T07:58:58.783207","status":"completed"},"tags":[]},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Example 8: Request multiple timestamps data","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ro6hUNfqtd"}],"identifier":"example-8-request-multiple-timestamps-data","label":"Example 8: Request multiple timestamps data","html_id":"example-8-request-multiple-timestamps-data","implicit":true,"key":"cFkJS29Hc0"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"It is possible to construct some logic in order to return data for multiple timestamps. By defining the ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"H2VDSuKAj9"},{"type":"inlineCode","value":"time_interval","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"aRvbRwQsFF"},{"type":"text","value":" parameter and some logic of splitting it, it is possible to create an SH reques per each “time slot” and then download the data from all the requests with the ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Zl2NpoGUAe"},{"type":"inlineCode","value":"SentinelHubDownloadClient","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"ZXqigxc8q3"},{"type":"text","value":" in ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"FpscynuCwY"},{"type":"inlineCode","value":"sentinelhub-py","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"SEKLuPl9Zf"},{"type":"text","value":". In this example we will create least cloudy monthly images for the year 2019.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"VRN4YqyBH4"}],"key":"XAtZP6tNOS"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"However, this is already a functionality built on top of this SH API package. We have extended the support for such usage in our package ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"qafsJDBmry"},{"type":"link","url":"https://github.com/sentinel-hub/eo-learn","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"eo-learn","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"Jo1G34qfQP"}],"urlSource":"https://github.com/sentinel-hub/eo-learn","error":true,"key":"Wb1nNJ13UV"},{"type":"text","value":". We recommend to use ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"SQfcol9nap"},{"type":"inlineCode","value":"eo-learn","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"FNUMlEBwpK"},{"type":"text","value":" for more complex cases where you need multiple timestamps or high-resolution data for larger areas.","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"BEFLYadSlf"}],"key":"KjOsntKgTA"}],"visibility":"show","key":"aY0GWuQDt3"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-10-24T07:58:59.708856Z","iopub.status.busy":"2023-10-24T07:58:59.708397Z","iopub.status.idle":"2023-10-24T07:58:59.715809Z","shell.execute_reply":"2023-10-24T07:58:59.715341Z"},"papermill":{"duration":0.287743,"end_time":"2023-10-24T07:58:59.717033","exception":false,"start_time":"2023-10-24T07:58:59.429290","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"start = datetime.datetime(2019,1,1)\nend = datetime.datetime(2019,12,31)\nn_chunks = 13\ntdelta = (end - start) / n_chunks\nedges = [(start + i*tdelta).date().isoformat() for i in range(n_chunks)]\nslots = [(edges[i], edges[i+1]) for i in range(len(edges)-1)]\n\nprint('Monthly time windows:\\n')\nfor slot in slots:\n    print(slot)","visibility":"show","key":"N0xTqs31HC"},{"type":"output","id":"TAViHU2jO7BCnh0qN-k8-","data":[{"name":"stdout","output_type":"stream","text":"Monthly time windows:\n\n('2019-01-01', '2019-01-29')\n('2019-01-29', '2019-02-26')\n('2019-02-26', '2019-03-26')\n('2019-03-26', '2019-04-23')\n('2019-04-23', '2019-05-21')\n('2019-05-21', '2019-06-18')\n('2019-06-18', '2019-07-16')\n('2019-07-16', '2019-08-13')\n('2019-08-13', '2019-09-10')\n('2019-09-10', '2019-10-08')\n('2019-10-08', '2019-11-05')\n('2019-11-05', '2019-12-03')\n"}],"visibility":"show","key":"wEnWzeoEWf"}],"visibility":"show","key":"s2HQ3bhaTO"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-10-24T07:59:00.342060Z","iopub.status.busy":"2023-10-24T07:59:00.341644Z","iopub.status.idle":"2023-10-24T07:59:00.344948Z","shell.execute_reply":"2023-10-24T07:59:00.344528Z"},"papermill":{"duration":0.285921,"end_time":"2023-10-24T07:59:00.345880","exception":false,"start_time":"2023-10-24T07:59:00.059959","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"def get_true_color_request(time_interval):\n    return SentinelHubRequest(\n        evalscript=evalscript_true_color,\n        input_data=[\n            SentinelHubRequest.input_data(\n                data_collection=DataCollection.SENTINEL2_L1C,\n                time_interval=time_interval,\n                mosaicking_order='leastCC'\n            )\n        ],\n        responses=[\n            SentinelHubRequest.output_response('default', MimeType.PNG)\n        ],\n        bbox=betsiboka_bbox,\n        size=betsiboka_size,\n        config=config\n    )","visibility":"show","key":"szi32RkZDc"},{"type":"output","id":"TvY8QAsO3GvQELrGu6hUh","data":[],"visibility":"show","key":"JURniDsUgi"}],"visibility":"show","key":"ya1Pe7i1GE"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-10-24T07:59:00.987296Z","iopub.status.busy":"2023-10-24T07:59:00.986928Z","iopub.status.idle":"2023-10-24T07:59:06.109827Z","shell.execute_reply":"2023-10-24T07:59:06.109199Z"},"papermill":{"duration":5.406415,"end_time":"2023-10-24T07:59:06.111345","exception":false,"start_time":"2023-10-24T07:59:00.704930","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# create a list of requests\nlist_of_requests = [get_true_color_request(slot) for slot in slots]\nlist_of_requests = [request.download_list[0] for request in list_of_requests]\n\n# download data with multiple threads\ndata = SentinelHubDownloadClient(config=config).download(list_of_requests, max_threads=5)","visibility":"show","key":"taK0xkjDLr"},{"type":"output","id":"m48HRXTVkC8Sq08mUhnBP","data":[],"visibility":"show","key":"YuNsm2kwsi"}],"visibility":"show","key":"oiwQ1U9ZV0"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-10-24T07:59:06.699774Z","iopub.status.busy":"2023-10-24T07:59:06.699285Z","iopub.status.idle":"2023-10-24T07:59:08.942736Z","shell.execute_reply":"2023-10-24T07:59:08.942242Z"},"papermill":{"duration":2.546323,"end_time":"2023-10-24T07:59:08.955558","exception":false,"start_time":"2023-10-24T07:59:06.409235","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# some stuff for pretty plots\nncols = 4\nnrows = 3\naspect_ratio = betsiboka_size[0] / betsiboka_size[1]\nsubplot_kw = {'xticks': [], 'yticks': [], 'frame_on': False}\n\nfig, axs = plt.subplots(ncols=ncols, nrows=nrows, figsize=(5 * ncols * aspect_ratio, 5 * nrows),\n                        subplot_kw=subplot_kw)\n\nfor idx, image in enumerate(data):\n    ax = axs[idx // ncols][idx % ncols]\n    ax.imshow(np.clip(image * 2.5/255, 0, 1))\n    ax.set_title(f'{slots[idx][0]}  -  {slots[idx][1]}', fontsize=10)\n\nplt.tight_layout()","visibility":"show","key":"Ragxv3biam"},{"type":"output","id":"0Y2lF1_TOm8k6mBbz2QJW","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"b10c454ccb423435bdc768f4b5d29050","path":"/example-viewer/build/b10c454ccb423435bdc768f4b5d29050.png"},"text/plain":{"content":"<Figure size 1205.35x1500 with 12 Axes>","content_type":"text/plain"}}}],"visibility":"show","key":"djnrvo3Fdk"}],"visibility":"show","key":"kc2NqMOZRb"}],"key":"uR3mrWxRiu"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"How to access DEM data through Sentinel Hub API","url":"/external-notebooks/eurodatacube/notebooks/notebooks/curated/how-to-access-dem-data-through-sentinel-hub-api","group":"Curated"}}},"domain":"http://localhost:3000"}