{"version":1,"kind":"Notebook","sha256":"8e669ace29a476ac241afb41b9b2077759f485d5c17c47a2f7ecd29786681189","slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.ogc-edc","location":"/external_notebooks/eurodatacube/notebooks/notebooks/contributions/ogc-edc.ipynb","dependencies":[],"frontmatter":{"title":"Important notes","content_includes_title":true,"kernelspec":{"name":"python3","display_name":"Python 3","language":"python"},"github":"https://github.com/eurodatacube/example-viewer","subject":"Euro Data Cube Examples","numbering":{"title":{"offset":5}},"edit_url":"https://github.com/eurodatacube/example-viewer/blob/main/external_notebooks/eurodatacube/notebooks/notebooks/contributions/ogc-edc.ipynb","exports":[{"format":"ipynb","filename":"ogc-edc.ipynb","url":"/example-viewer/build/ogc-edc-1c1db3747fa4bda13804838a232a0048.ipynb"}]},"widgets":{},"mdast":{"type":"root","children":[{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"from edc import setup_environment_variables\nsetup_environment_variables()","key":"zuNl9BW4Ir"},{"type":"output","id":"ZPrU8-vX2-6VhGMaA1GZ7","data":[{"output_type":"display_data","metadata":{},"data":{"text/markdown":{"content":"API credentials have automatically been injected for your active subscriptions.  \nThe following environment variables are now available:\n* `SH_CLIENT_NAME`\n* `SH_CLIENT_SECRET`\n* `SH_INSTANCE_ID`\n* `SH_CLIENT_ID`\n* `MY_AWS_BUCKET`\n* `MY_OGC_EDC_URL`\n","content_type":"text/markdown"},"text/plain":{"content":"<IPython.core.display.Markdown object>","content_type":"text/plain"}}}],"key":"TjUyiACwVF"}],"key":"WsT3oIgQmG"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Important notes","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"DFi8mfmd8K"}],"identifier":"important-notes","label":"Important notes","html_id":"important-notes","implicit":true,"key":"trqWdWzPSQ"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"This notebook requires:","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"nKOTCIK0of"}],"key":"U3UELaiich"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"OGC layer installed in EDC marketplace (with access url exposed as environment variable MY_OGC_EDC_URL)","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"GREj603Sdf"}],"key":"khdDos6o0b"}],"key":"sQ1q7iYejQ"}],"key":"ApejawjIDj"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"heading","depth":1,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"OGC-EDC example calls","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"xKDN4G1RJT"}],"identifier":"ogc-edc-example-calls","label":"OGC-EDC example calls","html_id":"ogc-edc-example-calls","implicit":true,"key":"sxtLGNGFgk"}],"key":"X5zOC1M0Tm"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"This Notebook containes some WMs calls for the generated and configured EGC_OGC URL, all the presented samples where taken from\npre-configured collecions and layers.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"LnAwfWNWqc"}],"key":"ojCnCxteL6"},{"type":"paragraph","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"The wms layers were simply requested using the python ","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"LZp51KaFz4"},{"type":"inlineCode","value":"requests","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"JV26036QR7"},{"type":"text","value":" library, and the desired parameters were set to exploit ","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"jjRjFNQsDF"},{"type":"emphasis","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"EDC-OGC","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"Au5v6PXCsp"}],"key":"ClAkU1vNW0"},{"type":"text","value":" backend potentials","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"KpTAHsbHTf"}],"key":"MA6FL3vAAl"},{"type":"paragraph","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Below is a comparison between a True Color image (Top) and a NDVI image (Bottom) of Sentinel 2 L1C","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"k56xw03z7C"}],"key":"Amhe4ibLZs"}],"key":"WFMc5jk2zp"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"import requests\nfrom IPython.display import Image, display\n\n# api-endpoint \nURL = %env MY_OGC_EDC_URL\n  \nPARAMS_1 = {\n    'service': 'WMS',\n    'version': '1.3.0',\n    'request': 'GetMap',\n    'layers': 'S2L1C__TRUECOLOR',\n    'bbox': '-15.759545,46.269951,-15.698739,46.426163',\n    'crs': 'EPSG:4326',\n    'styles': '',\n    'width': 1000,\n    'height': 500,\n    'format': 'image/png',\n    'time' : '',\n}\n  \nPARAMS_2 = {\n    'service': 'WMS',\n    'version': '1.3.0',\n    'request': 'GetMap',\n    'layers': 'L8L1C__NDVI',\n    'bbox': '-15.759545,46.269951,-15.698739,46.426163',\n    'crs': 'EPSG:4326',\n    'styles': 'EOX NDVI Colorscale',\n    'width': 1000,\n    'height': 500,\n    'format': 'image/png',\n    'time' : '',\n}","key":"kewTiG4jCO"},{"type":"output","id":"ZehNld09bMXyUMqoe0bL8","data":[],"key":"VRYqzaq1J5"}],"key":"luBWOyiza3"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"r_1 = requests.get(url = URL, params = PARAMS_1, stream=all) \nr_2= requests.get(url = URL, params = PARAMS_2, stream=all)\n","key":"mgS32Btaql"},{"type":"output","id":"p6fGqNASfFlkh1fdeRba9","data":[],"key":"jM2TUMLBWu"}],"key":"odAoJdu6rV"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"\ndisplay(Image(r_1.content))\n\ndisplay(Image(r_2.content))\n","key":"hMSyJmIFWA"},{"type":"output","id":"b_HgvzQQi2VX6nOXEyOQt","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"54da3d33e4fe44e90dc975459e1783ef","path":"/example-viewer/build/54da3d33e4fe44e90dc975459e1783ef.png"},"text/plain":{"content":"<IPython.core.display.Image object>","content_type":"text/plain"}}},{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"bd985b3f305dbc733fb6649c1a8606a0","path":"/example-viewer/build/bd985b3f305dbc733fb6649c1a8606a0.png"},"text/plain":{"content":"<IPython.core.display.Image object>","content_type":"text/plain"}}}],"key":"M62k6Qh2RU"}],"key":"ryGkfFMRUf"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"paragraph","position":{"start":{"line":4,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"users can set the required cloud coverage to filter out cloud, jsut by setting the cloud coverage parameter ‘maxcc’.\nbelow is a comparison between a 100% cloud coverage image  and a 50% cloud coverage","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"YCfYe2DFVH"}],"key":"p0Dww9sfOZ"}],"key":"deuFQlQC9X"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"PARAMS_3 = {\n    'service': 'WMS',\n    'version': '1.3.0',\n    'request': 'GetMap',\n    'layers': 'S2L1C__TRUECOLOR',\n    'bbox': '1466647.93,6036752.61,1517415.19,6052309.71',\n    'crs': 'EPSG:3857',\n    'styles': '',\n    'width': 1000,\n    'height': 300,\n    'format': 'image/png',\n    'time' : '',\n    'maxcc': '100'\n} \n\nPARAMS_4 = {\n    'service': 'WMS',\n    'version': '1.3.0',\n    'request': 'GetMap',\n    'layers': 'S2L1C__TRUECOLOR',\n    'bbox': '1466647.93,6036752.61,1517415.19,6052309.71',\n    'crs': 'EPSG:3857',\n    'styles': '',\n    'width': 1000,\n    'height': 300,\n    'format': 'image/png',\n    'time' : '',\n    'maxcc': '50'\n}  ","key":"fWPZuQ9ACz"},{"type":"output","id":"EAJx8IWlpCHR38kaBjC8w","data":[],"key":"qAa1v5TzTM"}],"key":"gwTWoWVqcM"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"a_1 = requests.get(url = URL, params = PARAMS_3, stream=all) \na_2= requests.get(url = URL, params = PARAMS_4, stream=all) ","key":"MQLSrpYDZ6"},{"type":"output","id":"CKczIObdKnJTwqbzdEwhL","data":[],"key":"muORXiBKLd"}],"key":"mxvMUZmf4P"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"display(Image(a_1.content))\n\ndisplay(Image(a_2.content))\n","key":"EUoJBNp8cY"},{"type":"output","id":"WGnqHiK0fomSn9ohcmC1Y","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"cb5412383930253b7f1ea3d072eff8c3","path":"/example-viewer/build/cb5412383930253b7f1ea3d072eff8c3.png"},"text/plain":{"content":"<IPython.core.display.Image object>","content_type":"text/plain"}}},{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"c42ddeb822f60a51a0a79db3e4e9760e","path":"/example-viewer/build/c42ddeb822f60a51a0a79db3e4e9760e.png"},"text/plain":{"content":"<IPython.core.display.Image object>","content_type":"text/plain"}}}],"key":"njYjKWisrB"}],"key":"EVVcZnEss3"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"below is S5 dataset","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"YyPpkxXBEo"}],"key":"kxBVRyi8MF"}],"key":"aJErswXZit"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"PARAMS_3 = {\n    'service': 'WMS',\n    'version': '1.3.0',\n    'request': 'GetMap',\n    'layers': 'S5PL2__NO2',\n    'bbox': '45,-11.25,56.25,0',\n    'crs': 'EPSG:4326',\n    'styles': '',\n    'width': 512,\n    'height': 512,\n    'format': 'image/png',\n    'time' : '2020-04-21/2020-04-26',\n    'maxcc': '100'\n}","key":"KHqZr58iOs"},{"type":"output","id":"HUyL-dWR6gbWEvuWFDSVO","data":[],"key":"BUrIJgnYzc"}],"key":"XGNJZGVkEM"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"a = requests.get(url = URL, params = PARAMS_3, stream=all)","key":"DEiNQJjXul"},{"type":"output","id":"8c_MC12cwRqtorM7VWKqH","data":[],"key":"r1UREadAZt"}],"key":"kHZkAdAaiQ"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"display(Image(a.content))","key":"G8tICjIyDb"},{"type":"output","id":"S4GYyyTI5CGMS1_xkK25t","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"a1b383f1daffe86e6f7005f864de15af","path":"/example-viewer/build/a1b383f1daffe86e6f7005f864de15af.png"},"text/plain":{"content":"<IPython.core.display.Image object>","content_type":"text/plain"}}}],"key":"SSaveQseo3"}],"key":"ll1XFB1Tci"}],"key":"Jxz7keLmx2"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"Using the NASA VEDA EOAPI","url":"/external-notebooks/eurodatacube/notebooks/notebooks/contributions/no2-so2-trend-veda-api-igarss-2023","group":"Contributions"},"next":{"title":"openEO Client Demo","url":"/external-notebooks/eurodatacube/notebooks/notebooks/contributions/openeo-client-demo","group":"Contributions"}}},"domain":"http://localhost:3000"}