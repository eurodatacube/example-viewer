{"version":1,"kind":"Notebook","sha256":"8e669ace29a476ac241afb41b9b2077759f485d5c17c47a2f7ecd29786681189","slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.ogc-edc","location":"/external_notebooks/eurodatacube/notebooks/notebooks/contributions/ogc-edc.ipynb","dependencies":[],"frontmatter":{"title":"Important notes","content_includes_title":true,"kernelspec":{"name":"python3","display_name":"Python 3","language":"python"},"github":"https://github.com/eurodatacube/example-viewer","subject":"Euro Data Cube Examples","numbering":{"title":{"offset":5}},"edit_url":"https://github.com/eurodatacube/example-viewer/blob/main/external_notebooks/eurodatacube/notebooks/notebooks/contributions/ogc-edc.ipynb","exports":[{"format":"ipynb","filename":"ogc-edc.ipynb","url":"/example-viewer/build/ogc-edc-306501cb1b06323e595db4b087a528c6.ipynb"}]},"widgets":{},"mdast":{"type":"root","children":[{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"from edc import setup_environment_variables\nsetup_environment_variables()","key":"U6o78quW3P"},{"type":"output","id":"T9fOVgNxIMueMxK45tTBw","data":[{"output_type":"display_data","metadata":{},"data":{"text/markdown":{"content":"API credentials have automatically been injected for your active subscriptions.  \nThe following environment variables are now available:\n* `SH_CLIENT_NAME`\n* `SH_CLIENT_SECRET`\n* `SH_INSTANCE_ID`\n* `SH_CLIENT_ID`\n* `MY_AWS_BUCKET`\n* `MY_OGC_EDC_URL`\n","content_type":"text/markdown"},"text/plain":{"content":"<IPython.core.display.Markdown object>","content_type":"text/plain"}}}],"key":"U0B9JvcR9V"}],"key":"M35MABxVWT"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Important notes","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"KD1Tvqf9gc"}],"identifier":"important-notes","label":"Important notes","html_id":"important-notes","implicit":true,"key":"rmeA6Z1Rfi"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"This notebook requires:","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"fnCNFIfswP"}],"key":"OLKG899DVW"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"OGC layer installed in EDC marketplace (with access url exposed as environment variable MY_OGC_EDC_URL)","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"zjLCWQ41Rt"}],"key":"wijUgJSYyn"}],"key":"VbEvJttgFd"}],"key":"YK3YTOlfuk"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"heading","depth":1,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"OGC-EDC example calls","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"HXsOcvLHW9"}],"identifier":"ogc-edc-example-calls","label":"OGC-EDC example calls","html_id":"ogc-edc-example-calls","implicit":true,"key":"OsPcyTHWpE"}],"key":"bWTsbT4rZI"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"This Notebook containes some WMs calls for the generated and configured EGC_OGC URL, all the presented samples where taken from\npre-configured collecions and layers.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"EPt1OnKVGv"}],"key":"lA1GtR14MP"},{"type":"paragraph","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"The wms layers were simply requested using the python ","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"M7LlTSYwNs"},{"type":"inlineCode","value":"requests","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"rAu7uCcXUx"},{"type":"text","value":" library, and the desired parameters were set to exploit ","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"N1YuGOJV8i"},{"type":"emphasis","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"EDC-OGC","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"iVwSiOOmBf"}],"key":"B6AqNkRNUt"},{"type":"text","value":" backend potentials","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"Xpgadc5udN"}],"key":"ppBCdAUneA"},{"type":"paragraph","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Below is a comparison between a True Color image (Top) and a NDVI image (Bottom) of Sentinel 2 L1C","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"CLL2Dz99v8"}],"key":"cFQw4szX9q"}],"key":"pNOUwKmw3O"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"import requests\nfrom IPython.display import Image, display\n\n# api-endpoint \nURL = %env MY_OGC_EDC_URL\n  \nPARAMS_1 = {\n    'service': 'WMS',\n    'version': '1.3.0',\n    'request': 'GetMap',\n    'layers': 'S2L1C__TRUECOLOR',\n    'bbox': '-15.759545,46.269951,-15.698739,46.426163',\n    'crs': 'EPSG:4326',\n    'styles': '',\n    'width': 1000,\n    'height': 500,\n    'format': 'image/png',\n    'time' : '',\n}\n  \nPARAMS_2 = {\n    'service': 'WMS',\n    'version': '1.3.0',\n    'request': 'GetMap',\n    'layers': 'L8L1C__NDVI',\n    'bbox': '-15.759545,46.269951,-15.698739,46.426163',\n    'crs': 'EPSG:4326',\n    'styles': 'EOX NDVI Colorscale',\n    'width': 1000,\n    'height': 500,\n    'format': 'image/png',\n    'time' : '',\n}","key":"tAqiT8D1KJ"},{"type":"output","id":"16mQ3pEFNyKrqQjI3I5GF","data":[],"key":"ESrNpF8TKa"}],"key":"Pi013iTEup"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"r_1 = requests.get(url = URL, params = PARAMS_1, stream=all) \nr_2= requests.get(url = URL, params = PARAMS_2, stream=all)\n","key":"b7Z46MLaQp"},{"type":"output","id":"aspQToauyETrp_QzSpqv4","data":[],"key":"u3FADnI1fI"}],"key":"tyh8JNG6ro"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"\ndisplay(Image(r_1.content))\n\ndisplay(Image(r_2.content))\n","key":"ryv02iGM76"},{"type":"output","id":"Sj7VOth76JfCtP04Fe0Os","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"54da3d33e4fe44e90dc975459e1783ef","path":"/example-viewer/build/54da3d33e4fe44e90dc975459e1783ef.png"},"text/plain":{"content":"<IPython.core.display.Image object>","content_type":"text/plain"}}},{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"bd985b3f305dbc733fb6649c1a8606a0","path":"/example-viewer/build/bd985b3f305dbc733fb6649c1a8606a0.png"},"text/plain":{"content":"<IPython.core.display.Image object>","content_type":"text/plain"}}}],"key":"aUuMzTsCo8"}],"key":"YE9tsg6vWP"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"paragraph","position":{"start":{"line":4,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"users can set the required cloud coverage to filter out cloud, jsut by setting the cloud coverage parameter ‘maxcc’.\nbelow is a comparison between a 100% cloud coverage image  and a 50% cloud coverage","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"E6QCxnu9rx"}],"key":"cUrtzou4z0"}],"key":"B7sULoiNZu"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"PARAMS_3 = {\n    'service': 'WMS',\n    'version': '1.3.0',\n    'request': 'GetMap',\n    'layers': 'S2L1C__TRUECOLOR',\n    'bbox': '1466647.93,6036752.61,1517415.19,6052309.71',\n    'crs': 'EPSG:3857',\n    'styles': '',\n    'width': 1000,\n    'height': 300,\n    'format': 'image/png',\n    'time' : '',\n    'maxcc': '100'\n} \n\nPARAMS_4 = {\n    'service': 'WMS',\n    'version': '1.3.0',\n    'request': 'GetMap',\n    'layers': 'S2L1C__TRUECOLOR',\n    'bbox': '1466647.93,6036752.61,1517415.19,6052309.71',\n    'crs': 'EPSG:3857',\n    'styles': '',\n    'width': 1000,\n    'height': 300,\n    'format': 'image/png',\n    'time' : '',\n    'maxcc': '50'\n}  ","key":"OScsUFd0mo"},{"type":"output","id":"CZwwQyLIsyZMP_XJ7lbIw","data":[],"key":"RWSoMVY79H"}],"key":"l9cGhMFsSg"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"a_1 = requests.get(url = URL, params = PARAMS_3, stream=all) \na_2= requests.get(url = URL, params = PARAMS_4, stream=all) ","key":"eGHnwu4Wez"},{"type":"output","id":"vhF0uiLpZST-uQMXCYVjJ","data":[],"key":"Cadznp4a4V"}],"key":"xXj3ZiRnLy"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"display(Image(a_1.content))\n\ndisplay(Image(a_2.content))\n","key":"egkwxRpLDf"},{"type":"output","id":"_qF_Xuf533nmqNOGxEVma","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"cb5412383930253b7f1ea3d072eff8c3","path":"/example-viewer/build/cb5412383930253b7f1ea3d072eff8c3.png"},"text/plain":{"content":"<IPython.core.display.Image object>","content_type":"text/plain"}}},{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"c42ddeb822f60a51a0a79db3e4e9760e","path":"/example-viewer/build/c42ddeb822f60a51a0a79db3e4e9760e.png"},"text/plain":{"content":"<IPython.core.display.Image object>","content_type":"text/plain"}}}],"key":"WntojW2GH2"}],"key":"cGjpAKd7Nd"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"below is S5 dataset","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"yGHWekbjTo"}],"key":"wxscdYtmxa"}],"key":"Hg2Rwx3NFl"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"PARAMS_3 = {\n    'service': 'WMS',\n    'version': '1.3.0',\n    'request': 'GetMap',\n    'layers': 'S5PL2__NO2',\n    'bbox': '45,-11.25,56.25,0',\n    'crs': 'EPSG:4326',\n    'styles': '',\n    'width': 512,\n    'height': 512,\n    'format': 'image/png',\n    'time' : '2020-04-21/2020-04-26',\n    'maxcc': '100'\n}","key":"mrd5X6GywP"},{"type":"output","id":"xBdlikjCKDggmHsZ96nYm","data":[],"key":"dvfggFVsfu"}],"key":"HpWJqtWvBq"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"a = requests.get(url = URL, params = PARAMS_3, stream=all)","key":"BXD7V6MeEu"},{"type":"output","id":"w_fzxk2tHEsvVulYsEnPm","data":[],"key":"UBjPJvsLCO"}],"key":"VHCkJ8X9YP"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"display(Image(a.content))","key":"HiY5viJF8K"},{"type":"output","id":"PbviHP7rAUQEwP1tUQyqq","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"a1b383f1daffe86e6f7005f864de15af","path":"/example-viewer/build/a1b383f1daffe86e6f7005f864de15af.png"},"text/plain":{"content":"<IPython.core.display.Image object>","content_type":"text/plain"}}}],"key":"O8MEJ7oKGz"}],"key":"j2IwMh26Pu"}],"key":"QZoJvoTpH3"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"Using the NASA VEDA EOAPI","url":"/external-notebooks/eurodatacube/notebooks/notebooks/contributions/no2-so2-trend-veda-api-igarss-2023","group":"Contributions"},"next":{"title":"openEO Client Demo","url":"/external-notebooks/eurodatacube/notebooks/notebooks/contributions/openeo-client-demo","group":"Contributions"}}},"domain":"http://localhost:3000"}