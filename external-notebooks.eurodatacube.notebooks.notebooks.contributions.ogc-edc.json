{"version":1,"kind":"Notebook","sha256":"8e669ace29a476ac241afb41b9b2077759f485d5c17c47a2f7ecd29786681189","slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.ogc-edc","location":"/external_notebooks/eurodatacube/notebooks/notebooks/contributions/ogc-edc.ipynb","dependencies":[],"frontmatter":{"title":"Important notes","content_includes_title":true,"kernelspec":{"name":"python3","display_name":"Python 3","language":"python"},"github":"https://github.com/esa-earthcode/example-viewer/","subject":"EarthCODE Examples","numbering":{"title":{"offset":5}},"edit_url":"https://github.com/esa-earthcode/example-viewer//blob/main/external_notebooks/eurodatacube/notebooks/notebooks/contributions/ogc-edc.ipynb","exports":[{"format":"ipynb","filename":"ogc-edc.ipynb","url":"/example-viewer/build/ogc-edc-6eb599fa92a85d4ef24efe79ad15c788.ipynb"}]},"widgets":{},"mdast":{"type":"root","children":[{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"from edc import setup_environment_variables\nsetup_environment_variables()","key":"jLweQ5ENOq"},{"type":"output","id":"wexijF9VlcBQnqWFs1J0W","data":[{"output_type":"display_data","metadata":{},"data":{"text/markdown":{"content":"API credentials have automatically been injected for your active subscriptions.  \nThe following environment variables are now available:\n* `SH_CLIENT_NAME`\n* `SH_CLIENT_SECRET`\n* `SH_INSTANCE_ID`\n* `SH_CLIENT_ID`\n* `MY_AWS_BUCKET`\n* `MY_OGC_EDC_URL`\n","content_type":"text/markdown"},"text/plain":{"content":"<IPython.core.display.Markdown object>","content_type":"text/plain"}}}],"key":"pG85DVe88Z"}],"key":"f0yqLW2cnV"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Important notes","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Q4KsPFTYMn"}],"identifier":"important-notes","label":"Important notes","html_id":"important-notes","implicit":true,"key":"dPTjWUkE3G"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"This notebook requires:","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"wyHEh86KTp"}],"key":"ceoGFmlern"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"OGC layer installed in EDC marketplace (with access url exposed as environment variable MY_OGC_EDC_URL)","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"xSY6rvT085"}],"key":"zUqwSVauB9"}],"key":"C25PeTke0s"}],"key":"jVmCPzuTqB"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"heading","depth":1,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"OGC-EDC example calls","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"CfMtb1vplb"}],"identifier":"ogc-edc-example-calls","label":"OGC-EDC example calls","html_id":"ogc-edc-example-calls","implicit":true,"key":"U2RmXsClV6"}],"key":"hfhQnw6u1H"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"This Notebook containes some WMs calls for the generated and configured EGC_OGC URL, all the presented samples where taken from\npre-configured collecions and layers.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"CpSmbiTEEW"}],"key":"WXoEH7MqLY"},{"type":"paragraph","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"The wms layers were simply requested using the python ","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"YrbfMcyIOZ"},{"type":"inlineCode","value":"requests","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"P4QU4ojcX5"},{"type":"text","value":" library, and the desired parameters were set to exploit ","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"VbEFtxV8IO"},{"type":"emphasis","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"EDC-OGC","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"UgZgaNnv69"}],"key":"MBlQdnzflc"},{"type":"text","value":" backend potentials","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"lvaiVS91vB"}],"key":"ESNsGbR7Tm"},{"type":"paragraph","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Below is a comparison between a True Color image (Top) and a NDVI image (Bottom) of Sentinel 2 L1C","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"sgWFnkt4iF"}],"key":"uNtmIJl4GI"}],"key":"pfFuKc8bsw"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"import requests\nfrom IPython.display import Image, display\n\n# api-endpoint \nURL = %env MY_OGC_EDC_URL\n  \nPARAMS_1 = {\n    'service': 'WMS',\n    'version': '1.3.0',\n    'request': 'GetMap',\n    'layers': 'S2L1C__TRUECOLOR',\n    'bbox': '-15.759545,46.269951,-15.698739,46.426163',\n    'crs': 'EPSG:4326',\n    'styles': '',\n    'width': 1000,\n    'height': 500,\n    'format': 'image/png',\n    'time' : '',\n}\n  \nPARAMS_2 = {\n    'service': 'WMS',\n    'version': '1.3.0',\n    'request': 'GetMap',\n    'layers': 'L8L1C__NDVI',\n    'bbox': '-15.759545,46.269951,-15.698739,46.426163',\n    'crs': 'EPSG:4326',\n    'styles': 'EOX NDVI Colorscale',\n    'width': 1000,\n    'height': 500,\n    'format': 'image/png',\n    'time' : '',\n}","key":"r7E5fPohDE"},{"type":"output","id":"Bfl8KnapeJj1Tr76q3qZQ","data":[],"key":"QixfRWVOGW"}],"key":"KhNTIHugjl"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"r_1 = requests.get(url = URL, params = PARAMS_1, stream=all) \nr_2= requests.get(url = URL, params = PARAMS_2, stream=all)\n","key":"fDTNd2fijg"},{"type":"output","id":"rgBRBJejsLYdz7-AK6_NV","data":[],"key":"WrdcJ1LCY8"}],"key":"BhkxAw84LY"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"\ndisplay(Image(r_1.content))\n\ndisplay(Image(r_2.content))\n","key":"e3O2MGx0j0"},{"type":"output","id":"rsw0yFvoY3hAJZWC0TE09","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"54da3d33e4fe44e90dc975459e1783ef","path":"/example-viewer/build/54da3d33e4fe44e90dc975459e1783ef.png"},"text/plain":{"content":"<IPython.core.display.Image object>","content_type":"text/plain"}}},{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"bd985b3f305dbc733fb6649c1a8606a0","path":"/example-viewer/build/bd985b3f305dbc733fb6649c1a8606a0.png"},"text/plain":{"content":"<IPython.core.display.Image object>","content_type":"text/plain"}}}],"key":"e4cXbkJwQc"}],"key":"ksNEpphrEc"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"paragraph","position":{"start":{"line":4,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"users can set the required cloud coverage to filter out cloud, jsut by setting the cloud coverage parameter ‘maxcc’.\nbelow is a comparison between a 100% cloud coverage image  and a 50% cloud coverage","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"YRwTM7RRFM"}],"key":"zgd5JM6vcO"}],"key":"u8wJ8U3aGY"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"PARAMS_3 = {\n    'service': 'WMS',\n    'version': '1.3.0',\n    'request': 'GetMap',\n    'layers': 'S2L1C__TRUECOLOR',\n    'bbox': '1466647.93,6036752.61,1517415.19,6052309.71',\n    'crs': 'EPSG:3857',\n    'styles': '',\n    'width': 1000,\n    'height': 300,\n    'format': 'image/png',\n    'time' : '',\n    'maxcc': '100'\n} \n\nPARAMS_4 = {\n    'service': 'WMS',\n    'version': '1.3.0',\n    'request': 'GetMap',\n    'layers': 'S2L1C__TRUECOLOR',\n    'bbox': '1466647.93,6036752.61,1517415.19,6052309.71',\n    'crs': 'EPSG:3857',\n    'styles': '',\n    'width': 1000,\n    'height': 300,\n    'format': 'image/png',\n    'time' : '',\n    'maxcc': '50'\n}  ","key":"Efb5C0GSep"},{"type":"output","id":"BLc16muFLuhb3PJ5YBihr","data":[],"key":"XfuCe23c0A"}],"key":"aoPxcGtMTH"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"a_1 = requests.get(url = URL, params = PARAMS_3, stream=all) \na_2= requests.get(url = URL, params = PARAMS_4, stream=all) ","key":"UKEEcgwPXw"},{"type":"output","id":"5Gkn0_t3Lg42fkvnSSNMe","data":[],"key":"LIirky6dV4"}],"key":"WnQIDBrduS"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"display(Image(a_1.content))\n\ndisplay(Image(a_2.content))\n","key":"NiZQBnaEQW"},{"type":"output","id":"zOXaZPvWgADAs__CkELLC","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"cb5412383930253b7f1ea3d072eff8c3","path":"/example-viewer/build/cb5412383930253b7f1ea3d072eff8c3.png"},"text/plain":{"content":"<IPython.core.display.Image object>","content_type":"text/plain"}}},{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"c42ddeb822f60a51a0a79db3e4e9760e","path":"/example-viewer/build/c42ddeb822f60a51a0a79db3e4e9760e.png"},"text/plain":{"content":"<IPython.core.display.Image object>","content_type":"text/plain"}}}],"key":"VD7p6waSlE"}],"key":"R17Xa7zHgE"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"below is S5 dataset","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"KC9GTemQI4"}],"key":"jAhbg3YWgg"}],"key":"dJkqISICnv"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"PARAMS_3 = {\n    'service': 'WMS',\n    'version': '1.3.0',\n    'request': 'GetMap',\n    'layers': 'S5PL2__NO2',\n    'bbox': '45,-11.25,56.25,0',\n    'crs': 'EPSG:4326',\n    'styles': '',\n    'width': 512,\n    'height': 512,\n    'format': 'image/png',\n    'time' : '2020-04-21/2020-04-26',\n    'maxcc': '100'\n}","key":"iyXUK7JEUk"},{"type":"output","id":"OFprUsZAtdlUbEX2v-YE-","data":[],"key":"xwpUNrMLSq"}],"key":"WBeYqR7efI"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"a = requests.get(url = URL, params = PARAMS_3, stream=all)","key":"NAz5P5sMfY"},{"type":"output","id":"2fik6N9oM-WMZKv8JCt0z","data":[],"key":"edgm1aHTjU"}],"key":"TpcJyFLV8V"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"display(Image(a.content))","key":"jFGmtFj7qJ"},{"type":"output","id":"SxzV_1IsKDuziVx5AtTmK","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"a1b383f1daffe86e6f7005f864de15af","path":"/example-viewer/build/a1b383f1daffe86e6f7005f864de15af.png"},"text/plain":{"content":"<IPython.core.display.Image object>","content_type":"text/plain"}}}],"key":"NDyZj7AeYH"}],"key":"nESUC0s4Dp"}],"key":"l4lGRdzDte"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"Using the NASA VEDA EOAPI","url":"/external-notebooks/eurodatacube/notebooks/notebooks/contributions/no2-so2-trend-veda-api-igarss-2023","group":"Contributions"},"next":{"title":"openEO Client Demo","url":"/external-notebooks/eurodatacube/notebooks/notebooks/contributions/openeo-client-demo","group":"Contributions"}}},"domain":"http://localhost:3000"}