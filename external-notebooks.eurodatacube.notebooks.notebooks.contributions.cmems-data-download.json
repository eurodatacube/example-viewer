{"version":1,"kind":"Notebook","sha256":"0ffb1edd8597aaf7b6da5f18be133b161d09962de435c37d11e006437a73e172","slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.cmems-data-download","location":"/external_notebooks/eurodatacube/notebooks/notebooks/contributions/cmems_data_download.ipynb","dependencies":[],"frontmatter":{"kernelspec":{"name":"python3","display_name":"Python 3 (ipykernel)","language":"python"},"github":"https://github.com/esa-earthcode/example-viewer/","subject":"EarthCODE Examples","numbering":{"title":{"offset":5}},"edit_url":"https://github.com/esa-earthcode/example-viewer//blob/main/external_notebooks/eurodatacube/notebooks/notebooks/contributions/cmems_data_download.ipynb","exports":[{"format":"ipynb","filename":"cmems_data_download.ipynb","url":"/example-viewer/build/cmems_data_download-6264f627bfa08cde9803cdcca0eaf3c2.ipynb"}]},"widgets":{},"mdast":{"type":"root","children":[{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"As the first step of the process we need install mptuclient on EDC environment. Currently the master version is not working, so we use the 1.8.8 branch.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"yhUGe14WTJ"}],"key":"Wc0j1VaxGj"}],"key":"hHW1ft91GO"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"!pip install motuclient==1.8.8","visibility":"show","key":"TDcapAJTK3"},{"type":"output","id":"5XgXUFheJXXSDCzcnZrmh","data":[],"visibility":"show","key":"fiROlU1sEm"}],"visibility":"show","key":"oW6qkADKRg"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Run the request for a specific product. It will be downloaded into the root folder. Change “out_dir” and “out_name” to specify a different download path. Use the edc credentials to set the CMEMS_USERNAME and CMEMS_PASSWORD.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"xY7vJiWDWD"}],"key":"lLMaFUZoiT"}],"key":"bkFxHjz45u"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"import os\nfrom datetime import datetime\n\ncmems_usr = %env CMEMS_USERNAME\ncmems_passwd = %env CMEMS_PASSWORD\n\n# change these paramaters for different products. Details are available here https://resources.marine.copernicus.eu/product-detail/GLOBAL_ANALYSIS_FORECAST_PHY_001_024/DATA-ACCESS\ndataset_id=\"GLOBAL_ANALYSIS_FORECAST_PHY_001_024-TDS\"\nproduct_id=\"cmems_mod_glo_phy_anfc_merged-uv_PT1H-i\"\nvariable1 = \"uo\"\n\nlon_min=\"28.5\"\nlon_max=\"32.5\"\nlat_min=\"42.5\"\nlat_max=\"46.0\"\ndate_min=datetime(2021, 1, 6, 0, 0, 0, 0)\ndate_max=datetime(2021, 4, 9, 0, 0, 0, 0)\ndepth_min=0.494024\ndepth_max=0.494026\n\n#destination folder and file names\nout_dir = \".\"\nnc_name = 'out.nc'\n\n\n#do not change!!\nmotu_server =\"http://nrt.cmems-du.eu/motu-web/Motu\"\n\nfullPath = os.path.join(os.path.abspath('.'), out_dir, nc_name) \nprint(fullPath)\nif os.path.exists(fullPath):\n    os.remove(fullPath)\n\ncommand = \"python -m motuclient --user \" + str(cmems_usr) + \" --pwd \" + str(cmems_passwd) +\" --motu \" + str(motu_server) + \" --service-id \" + str(dataset_id) + \" --product-id \" + str(product_id) + \" --longitude-min \" + str(lon_min) + \" --longitude-max \" + str(lon_max) + \" --latitude-min \" + str(lat_min) + \" --latitude-max \" + str(lat_max) + \" --date-min \" + str(date_min) + \" --date-max \" + str(date_max) + \" --variable \" + str(variable1) + \" --out-dir \" + str(out_dir) + \" --out-name \" + str(nc_name) + \" --depth-min \" + str(depth_min) + \" --depth-max \" + str(depth_max)\nprint(\"Executing command:\")\nos.system(command)","key":"KJgCvKuqw5"},{"type":"output","id":"217X77Y0t0U8PA_xzKaLs","data":[],"key":"GOVXP7qHMv"}],"key":"yY7nFLLC0V"}],"key":"WrKWqPpazI"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"Important notes","url":"/external-notebooks/eurodatacube/notebooks/notebooks/contributions/client-side-processing-using-mass-sh","group":"Contributions"},"next":{"title":"Detect Trucks using Sentinel-2 data","url":"/external-notebooks/eurodatacube/notebooks/notebooks/contributions/detect-trucks-sentinel2","group":"Contributions"}}},"domain":"http://localhost:3000"}